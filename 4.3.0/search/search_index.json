{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Fiddler","text":""},{"location":"#_1","title":"","text":"<p> Fiddler is a stream processor built in rust that uses a yaml based configuration file syntax to map together inputs, processors, and outputs. Fiddler takes a module approach to inputs, processors, and outputs allowing users to take advantage of incremental releases of new modules or develop their own to run within the fiddler runtime.  Whether you are looking to utilize fiddler for it's processing capabilities through the CLI or integrate directly in your own applications, head over to our Documentation to get started.  </p> <p>See our Getting Started to begin!</p>"},{"location":"configuration","title":"Configuration","text":""},{"location":"configuration#basic-syntax","title":"Basic Syntax","text":"<pre><code>label: Label for Pipeline\nnum_threads: 3\nmetrics:\n  prometheus: {}\ninput:\n  label: standard in\n  stdin: {}\nprocessors:\n  - noop: {}\n  - label: Split lines\n    lines: {}\noutput:\n  label: standard out\n  stdout: {}\n</code></pre>"},{"location":"configuration#fields","title":"Fields","text":""},{"location":"configuration#label","title":"<code>label</code>","text":"<p>Descriptive label for the component.  (Pipeline, Input, Processor, Output) Type: <code>string</code> Required: <code>false</code></p>"},{"location":"configuration#num_threads","title":"<code>num_threads</code>","text":"<p>Number of processor and output threads to spawn in the pipeline Type: <code>int</code> Required: <code>false</code> [Default: number of CPUs]</p>"},{"location":"configuration#metrics","title":"<code>metrics</code>","text":"<p>Optional metrics configuration for observability.  See Metrics Type: <code>object</code> Required: <code>false</code></p>"},{"location":"configuration#input","title":"<code>input</code>","text":"<p>Valid input configuration.  See Inputs Type: <code>object</code> Required: <code>true</code></p>"},{"location":"configuration#processors","title":"<code>processors</code>","text":"<p>An Array of processors to perform manipulation of messages.  See Processors Type: <code>array</code> Required: <code>true</code></p>"},{"location":"configuration#output","title":"<code>output</code>","text":"<p>Valid output configuration.  See Outputs Type: <code>object</code> Required: <code>true</code> </p>"},{"location":"configuration#environmental-variables","title":"Environmental Variables","text":"<p>Fiddler supports handlebars style templating  and will replace values of configuration files with available environmental varialbes.  This is useful for dynamic or sensitive values; such as URLs and passowrds.  For example:  </p> <pre><code>output:\n  elasticsearch:\n    url: {{ ES_URL }}\n    username: elastic\n    password: {{ ES_PASS }}\n    index: flow\n    cert_validation: None\n    batching_policy:\n      size: 100\n      duration: 10s\n</code></pre>"},{"location":"getting_started","title":"Get Started","text":""},{"location":"getting_started#running-as-a-cli","title":"Running as a CLI","text":""},{"location":"getting_started#installation","title":"Installation","text":"<ol> <li>Grab a release for your OS here</li> <li>Install with Cargo <code>cargo install fiddler</code></li> <li>Build with Cargo <code>cargo build --release --features all</code></li> </ol>"},{"location":"getting_started#usage","title":"Usage","text":"<pre><code>Usage: fiddler &lt;COMMAND&gt;\n\nCommands:\n  lint  Data Stream processor CLI written in rust\n  run   Data Stream processor CLI written in rust\n  test  Data Stream processor CLI written in rust\n  help  Print this message or the help of the given subcommand(s)\n\nOptions:\n  -h, --help  Print help\n</code></pre>"},{"location":"getting_started#run","title":"Run","text":"<pre><code>Data Stream processor CLI written in rust\n\nUsage: fiddler run [OPTIONS]\n\nOptions:\n  -c, --config &lt;CONFIG&gt;\n  -l, --log-level &lt;LOG_LEVEL&gt;  [default: none] [possible values: info, debug, trace, error, none]\n  -h, --help                   Print help\n  -V, --version                Print version\n</code></pre> <ol> <li><code>fiddler run -c &lt;path_to_config_file&gt; [ -c ... ]</code></li> </ol>"},{"location":"getting_started#lint","title":"Lint","text":"<pre><code>Data Stream processor CLI written in rust\n\nUsage: fiddler lint [OPTIONS]\n\nOptions:\n  -c, --config &lt;CONFIG&gt;\n  -h, --help             Print help\n  -V, --version          Print version\n</code></pre> <ol> <li><code>fiddler lint -c &lt;path_to_config_file&gt; [ -c ... ]</code></li> </ol>"},{"location":"getting_started#test","title":"Test","text":"<pre><code>Data Stream processor CLI written in rust\n\nUsage: fiddler test [OPTIONS]\n\nOptions:\n  -c, --config &lt;CONFIG&gt;\n  -l, --log-level &lt;LOG_LEVEL&gt;  [default: none] [possible values: info, debug, trace, error, none]\n  -h, --help                   Print help\n  -V, --version                Print version\n</code></pre> <p>Tests within fiddler are designed to test the processing pipeline configuration.  The expected naming syntax is <code>&lt;filename&gt;_test.yaml</code>.  I.e. if you have a configuration <code>input.yaml</code>.  The expected filename is <code>input_test.yaml</code>.  </p> <p>The test file syntax is as follows:  </p> <pre><code>- name: name_of_test\n  inputs:\n   - list of expected input strings\n  expected_outputs:\n   - list of expected output strings\n</code></pre> <p>For example: <pre><code>- name: input_test\n  inputs:\n    - Hello World\n  expected_outputs: \n    - Hello World\n</code></pre></p> <ol> <li><code>fiddler-cli test -c &lt;path_to_configuration&gt;.yaml</code></li> </ol>"},{"location":"getting_started#integration","title":"Integration","text":""},{"location":"getting_started#building-own-cli-with-additional-modules","title":"Building own CLI with Additional modules","text":"<p>Creating your own fiddler-cli requires a binary crate with at least two dependencies, <code>fiddler_cmd</code> and <code>fiddler</code>.</p> <p><code>cargo new my-cli --bin</code> <code>cargo add fiddler</code> <code>cargo add fiddler_cmd</code> </p> <p>Next create your runtime, by default in <code>src/main.rs</code> <pre><code>use fiddler_cmd::run;\nuse fiddler::Error;\nuse fiddler::config::{ConfigSpec, register_plugin};\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Error&gt; {\n    // insert registration of custom modules here\n    register_plugin(\"mock\".into(), ItemType::Input, conf_spec, create_mock_input)?;\n\n    // run the normal CLI\n    run().await\n}\n</code></pre></p>"},{"location":"getting_started#integrating-the-runtme-into-your-own-application","title":"Integrating the runtme into your own application","text":"<p>Head on over to docs.rs to view the latest API reference for utilizing fiddler runtime.  </p>"},{"location":"inputs/About","title":"Input","text":"<p>The source of messages for fiddler are described as inputs.  There may only be one input per configuration item.  Input key names must be uniquely registered across all available fiddler inputs.</p> <pre><code>input:\n  label: standard in\n  stdin: {}\n</code></pre>"},{"location":"inputs/About#available-inputs","title":"Available Inputs","text":"Input Description Feature Flag file Read from local files - http_server Receive data via HTTP POST requests <code>http_server</code> stdin Read from standard input - aws_s3 Read from AWS S3 buckets <code>aws</code> aws_sqs Read from AWS SQS queues <code>aws</code>"},{"location":"inputs/aws_s3","title":"aws_s3","text":"<p>Process data from a S3 Bucket</p> RequiredFull <pre><code>input:\n    aws_s3:\n        bucket: \"my-bucket\"\n</code></pre> <pre><code>input:\n    aws_s3:\n        bucket: \"my-bucket\"\n        prefix: \"myprefix/\"\n        queue:\n            queue_url: \"https://some_queue_url\"\n            endpoint_url: \"https://some_unique_endpoint\"\n            credentials:\n                access_key_id: \"AccessKey\"\n                secret_access_key: \"SecretKey\"\n                session_token: \"SessionToken\"\n            region: \"us-west-2\"\n        credentials:\n            access_key_id: \"AccessKey\"\n            secret_access_key: \"SecretKey\"\n            session_token: \"SessionToken\"\n        delete_after_read: false\n        endpoint_url: \"https://some_unique_endpoint\"\n        read_lines: true\n        force_path_style_urls: false\n        region: us-east-1\n</code></pre>"},{"location":"inputs/aws_s3#metadata","title":"Metadata","text":"<p><code>s3_bucket</code>: S3 Bucket of the object <code>s3_key</code>: S3 Key</p>"},{"location":"inputs/aws_s3#fields","title":"Fields","text":""},{"location":"inputs/aws_s3#bucket","title":"<code>bucket</code>","text":"<p>The S3 Bucket to process.  Note: if <code>queue</code> is provided, the bucket provided in the S3 Event Record will be used Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"inputs/aws_s3#prefix","title":"<code>prefix</code>","text":"<p>The prefix of the objects from the s3 bucket to process.  Note: ignored if <code>queue</code> is used Type: <code>string</code> Required: <code>false</code> </p>"},{"location":"inputs/aws_s3#queue","title":"<code>queue</code>","text":"<p>The aws_sqs object to utilize.  Expectes S3 Notifications directly to SQS Type: <code>object</code> Required: <code>false</code> Properties: <code>queue_url</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS SQS Queue URL to utilize \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> </p> <p> <code>endpoint_url</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Custom AWS SQS Endpoint URL \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code> </p> <p> <code>credentials</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Credentials Object to utilize.  If no credentials object is provided, fiddler will utilize standard SDK locations to pull in credentials. \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>object</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Properties: <code>access_key_id</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Access Key ID \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>secret_access_key</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Secret Access Key \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>session_token</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Session Token \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code>  \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code></p>"},{"location":"inputs/aws_s3#credentials","title":"<code>credentials</code>","text":"<p>AWS Credentials Object to utilize.  If no credentials object is provided, fiddler will utilize standard SDK locations to pull in credentials. Type: <code>object</code> Properties: <code>access_key_id</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Access Key ID \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>secret_access_key</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Secret Access Key \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>session_token</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Session Token \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code>  Required: <code>false</code></p>"},{"location":"inputs/aws_s3#delete_after_read","title":"<code>delete_after_read</code>","text":"<p>Delete the object after it has been fully processed Type: <code>bolean</code> Default: <code>false</code> Required: <code>false</code> </p>"},{"location":"inputs/aws_s3#force_path_style_urls","title":"<code>force_path_style_urls</code>","text":"<p>Force Path Style S3 URLS Type: <code>boolean</code> Required: <code>false</code> </p>"},{"location":"inputs/aws_s3#region","title":"<code>region</code>","text":"<p>AWS Region of the bucket Type: <code>string</code> Required: <code>false</code> </p>"},{"location":"inputs/aws_s3#credentials_1","title":"Credentials","text":"<p>Required IAM permissions to operate: - s3:GetObject - s3:ListBucket  </p> <p>Required IAM permissions to operate if using the Queue: - sqs:ReceiveMessage - sqs:DeleteMessage - sqs:ChangeMessageVisibility  </p> <p>Required IAM permissions to operate if using <code>delete_objects</code> - s3:DeleteObject  </p> <p>If using KMS, the following kms permissions may be needed on the relvant keys: - kms:Decrypt</p>"},{"location":"inputs/aws_sqs","title":"aws_sqs","text":"<p>Receive messages from an AWS SQS Queue</p> RequiredFull <pre><code>input:\n    aws_sqs:\n        queue_url: \"https://some_queue_url\"\n</code></pre> <pre><code>input:\n    aws_sqs:\n        queue_url: \"https://some_queue_url\"\n        endpoint_url: \"https://some_unique_endpoint\"\n        credentials:\n            access_key_id: \"AccessKey\"\n            secret_access_key: \"SecretKey\"\n            session_token: \"SessionToken\"\n        region: \"us-west-2\"\n</code></pre>"},{"location":"inputs/aws_sqs#metadata","title":"Metadata","text":"<p>All SQS Message attributes are inserted into metadata of the message</p>"},{"location":"inputs/aws_sqs#fields","title":"Fields","text":""},{"location":"inputs/aws_sqs#queue_url","title":"<code>queue_url</code>","text":"<p>AWS SQS Queue URL to utilize Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"inputs/aws_sqs#endpoint_url","title":"<code>endpoint_url</code>","text":"<p>Custom AWS SQS Endpoint URL Type: <code>string</code> Required: <code>false</code> </p>"},{"location":"inputs/aws_sqs#credentials","title":"<code>credentials</code>","text":"<p>AWS Credentials Object to utilize.  If no credentials object is provided, fiddler will utilize standard SDK locations to pull in credentials. Type: <code>object</code> Properties: <code>access_key_id</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Access Key ID \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>secret_access_key</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Secret Access Key \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>session_token</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Session Token \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code>  Required: <code>false</code></p>"},{"location":"inputs/aws_sqs#credentials_1","title":"Credentials","text":"<p>Required IAM permissions to operate: - sqs:ReceiveMessage - sqs:DeleteMessage - sqs:ChangeMessageVisibility  </p>"},{"location":"inputs/file","title":"file","text":"<p>Read file off of the local filesystem</p> RequiredFull <pre><code>input:\n    file:\n        filename: path_to_file\n</code></pre> <pre><code>input:\n    file:\n        filename: path_to_file\n        codec: Tail\n        position_filename: path_to_position_file\n</code></pre>"},{"location":"inputs/file#fields","title":"Fields","text":""},{"location":"inputs/file#filename","title":"<code>filename</code>","text":"<p>Path to the file to consume Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"inputs/file#codec","title":"<code>codec</code>","text":"<p>Enum to outline the type of file reader to implement Type: <code>string</code> Accepted values:  <code>Lines</code>: Read the file line by line [default] <code>ToEnd</code>: Read the file in its entirity <code>Tail</code>: Read the file line by line, waiting for new data to be written  </p>"},{"location":"inputs/file#position_filename","title":"<code>position_filename</code>","text":"<p>Filename to track the position of tailed files Type: <code>string</code> Required: with <code>codec</code>: <code>Tail</code> </p>"},{"location":"inputs/http_server","title":"http_server","text":"<p>Receive data via HTTP POST requests and forward to the pipeline.</p> <p>!!! note \"Feature Flag Required\"     This input requires the <code>http_server</code> feature to be enabled when building fiddler.     <pre><code>cargo build --features http_server\n</code></pre></p> BasicFull <pre><code>input:\n  http_server:\n    port: 8080\n</code></pre> <pre><code>input:\n  http_server:\n    address: \"0.0.0.0\"\n    port: 8080\n    path: \"/ingest\"\n    max_body_size: 10485760\n    acknowledgment: true\n    cors_enabled: false\n</code></pre>"},{"location":"inputs/http_server#endpoints","title":"Endpoints","text":""},{"location":"inputs/http_server#post-path-default-ingest","title":"POST <code>{path}</code> (default: <code>/ingest</code>)","text":"<p>Accepts JSON data and feeds it to the pipeline.</p> <p>Request Format:</p> <ul> <li>Content-Type: <code>application/json</code></li> <li>Body: JSON object or array of JSON objects</li> </ul> <p>Response Codes:</p> Status Description Response Body 200 Messages accepted/processed <code>{\"accepted\": 1, \"processed\": 1}</code> 400 Invalid JSON <code>{\"error\": \"Invalid JSON\", \"details\": \"&lt;message&gt;\"}</code> 413 Payload too large <code>{\"error\": \"Payload too large\", \"max_size\": 10485760}</code> 500 All messages failed <code>{\"error\": \"All messages failed\", \"errors\": [...]}</code>"},{"location":"inputs/http_server#get-health","title":"GET <code>/health</code>","text":"<p>Health check endpoint.</p> <p>Response: <pre><code>{\"status\": \"healthy\"}\n</code></pre></p>"},{"location":"inputs/http_server#usage-example","title":"Usage Example","text":"<p>Send a single event: <pre><code>curl -X POST http://localhost:8080/ingest \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"event\": \"click\", \"user_id\": 123}'\n</code></pre></p> <p>Send multiple events: <pre><code>curl -X POST http://localhost:8080/ingest \\\n  -H \"Content-Type: application/json\" \\\n  -d '[{\"event\": \"click\"}, {\"event\": \"view\"}]'\n</code></pre></p>"},{"location":"inputs/http_server#fields","title":"Fields","text":""},{"location":"inputs/http_server#address","title":"<code>address</code>","text":"<p>Network address to bind the HTTP server. Type: <code>string</code> Default: <code>\"0.0.0.0\"</code> Required: <code>false</code></p>"},{"location":"inputs/http_server#port","title":"<code>port</code>","text":"<p>Port number to listen on. Type: <code>integer</code> Default: <code>8080</code> Required: <code>false</code></p>"},{"location":"inputs/http_server#path","title":"<code>path</code>","text":"<p>HTTP endpoint path for ingestion. Must start with <code>/</code>. Type: <code>string</code> Default: <code>\"/ingest\"</code> Required: <code>false</code></p>"},{"location":"inputs/http_server#max_body_size","title":"<code>max_body_size</code>","text":"<p>Maximum request body size in bytes. Requests exceeding this limit receive a 413 error. Type: <code>integer</code> Default: <code>10485760</code> (10 MB) Required: <code>false</code></p>"},{"location":"inputs/http_server#acknowledgment","title":"<code>acknowledgment</code>","text":"<p>When <code>true</code>, the HTTP response is delayed until the message has been fully processed through the pipeline (including all outputs). When <code>false</code>, the response is sent immediately after the message is queued. Type: <code>boolean</code> Default: <code>true</code> Required: <code>false</code></p>"},{"location":"inputs/http_server#cors_enabled","title":"<code>cors_enabled</code>","text":"<p>Enable CORS headers for cross-origin requests from browsers. Type: <code>boolean</code> Default: <code>false</code> Required: <code>false</code></p>"},{"location":"inputs/http_server#message-format","title":"Message Format","text":"<p>Each JSON object in the request body becomes a message with:</p> <ul> <li><code>bytes</code>: The JSON object serialized as bytes</li> <li><code>metadata</code>: Empty (can be populated by processors)</li> <li><code>message_type</code>: <code>Default</code></li> <li><code>stream_id</code>: <code>None</code></li> </ul>"},{"location":"inputs/http_server#acknowledgment-modes","title":"Acknowledgment Modes","text":""},{"location":"inputs/http_server#with-acknowledgment-default","title":"With Acknowledgment (default)","text":"<pre><code>input:\n  http_server:\n    acknowledgment: true\n</code></pre> <ul> <li>HTTP response waits for pipeline completion</li> <li>Response includes processing status</li> <li>Enables at-least-once delivery semantics</li> <li>Higher latency but guaranteed feedback</li> </ul>"},{"location":"inputs/http_server#without-acknowledgment","title":"Without Acknowledgment","text":"<pre><code>input:\n  http_server:\n    acknowledgment: false\n</code></pre> <ul> <li>HTTP response sent immediately after queueing</li> <li>Fire-and-forget mode</li> <li>Lower latency but no processing feedback</li> <li>Useful for high-throughput scenarios where delivery guarantees are not critical</li> </ul>"},{"location":"inputs/http_server#full-pipeline-example","title":"Full Pipeline Example","text":"<pre><code>label: HTTP Ingestion Pipeline\ninput:\n  http_server:\n    address: \"0.0.0.0\"\n    port: 8080\n    path: \"/events\"\n    max_body_size: 5242880  # 5 MB\n    acknowledgment: true\n    cors_enabled: true\nprocessors:\n  - fiddlerscript:\n      source: |\n        root.timestamp = timestamp()\n        root.processed = true\noutput:\n  stdout: {}\n</code></pre>"},{"location":"inputs/stdin","title":"stdin","text":"<p>Read data from stdin by lines and forward to the pipeline</p> Required <pre><code>input:\n    stdin: {}\n</code></pre>"},{"location":"metrics/About","title":"Metrics","text":"<p>Metrics provide observability into the fiddler runtime by exposing statistics about message processing. Metrics configuration is optional - if not provided, metrics are disabled with zero overhead.</p> <pre><code>metrics:\n  prometheus: {}\n</code></pre>"},{"location":"metrics/About#available-metrics","title":"Available Metrics","text":"<p>The following metrics are tracked and exposed by all metrics backends:</p> Metric Type Description <code>total_received</code> Counter Total messages received from input <code>total_completed</code> Counter Messages successfully processed through all outputs <code>total_process_errors</code> Counter Messages that encountered processing errors <code>total_output_errors</code> Counter Messages that encountered output errors <code>streams_started</code> Counter Number of streams started <code>streams_completed</code> Counter Number of streams completed <code>duplicates_rejected</code> Counter Duplicate messages rejected <code>stale_entries_removed</code> Counter Stale entries cleaned up from state tracker <code>in_flight</code> Gauge Current number of messages being processed <code>throughput_per_sec</code> Gauge Current throughput in messages per second <code>input_bytes</code> Counter Total bytes received from input <code>output_bytes</code> Counter Total bytes written to output <code>bytes_per_sec</code> Gauge Current throughput in bytes per second <code>latency_avg_ms</code> Gauge Average message processing latency in milliseconds <code>latency_min_ms</code> Gauge Minimum message processing latency in milliseconds <code>latency_max_ms</code> Gauge Maximum message processing latency in milliseconds"},{"location":"metrics/About#configuration","title":"Configuration","text":"<p>Metrics are configured at the top level of the pipeline configuration:</p> <pre><code>label: My Pipeline\nmetrics:\n  prometheus: {}\ninput:\n  stdin: {}\nprocessors:\n  - noop: {}\noutput:\n  stdout: {}\n</code></pre>"},{"location":"metrics/About#available-backends","title":"Available Backends","text":"Backend Description Feature Flag clickhouse Send metrics to ClickHouse for time-series storage <code>clickhouse</code> cloudwatch AWS CloudWatch metrics <code>aws</code> prometheus Prometheus-compatible metrics endpoint <code>prometheus</code> stdout Output metrics as JSON to stdout -"},{"location":"metrics/clickhouse","title":"clickhouse","text":"<p>Send pipeline metrics to ClickHouse for time-series storage and analysis.</p> <p>!!! note \"Feature Flag Required\"     This metrics backend requires the <code>clickhouse</code> feature to be enabled when building fiddler.     <pre><code>cargo build --features clickhouse\n</code></pre></p> BasicFull <pre><code>metrics:\n  clickhouse:\n    url: \"http://localhost:8123\"\n</code></pre> <pre><code>metrics:\n  interval: 60\n  clickhouse:\n    url: \"http://localhost:8123\"\n    database: fiddler\n    table: metrics\n    username: default\n    password: secret\n    include:\n      - total_received\n      - total_completed\n      - throughput_per_sec\n    exclude:\n      - stale_entries_removed\n    dimensions:\n      - name: environment\n        value: production\n      - name: pipeline\n        value: main\n    batch_size: 100\n    flush_interval_ms: 5000\n    create_table: true\n    ttl_days: 30\n</code></pre>"},{"location":"metrics/clickhouse#fields","title":"Fields","text":""},{"location":"metrics/clickhouse#url","title":"<code>url</code>","text":"<p>ClickHouse HTTP interface URL. Type: <code>string</code> Required: <code>true</code></p>"},{"location":"metrics/clickhouse#database","title":"<code>database</code>","text":"<p>Target database name for metrics. Type: <code>string</code> Default: <code>\"fiddler\"</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#table","title":"<code>table</code>","text":"<p>Target table name for metrics. Type: <code>string</code> Default: <code>\"metrics\"</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#username","title":"<code>username</code>","text":"<p>Username for authentication. Type: <code>string</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#password","title":"<code>password</code>","text":"<p>Password for authentication. Type: <code>string</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#include","title":"<code>include</code>","text":"<p>List of metric names to include. If not specified, all metrics are included. Type: <code>array[string]</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#exclude","title":"<code>exclude</code>","text":"<p>List of metric names to exclude. Applied after <code>include</code> filter. Type: <code>array[string]</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#dimensions","title":"<code>dimensions</code>","text":"<p>Additional dimension columns added to all metric rows. Useful for identifying pipelines or environments. Type: <code>array</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#dimension-object","title":"Dimension Object","text":"Field Type Description <code>name</code> string Dimension column name <code>value</code> string Constant value for all rows"},{"location":"metrics/clickhouse#batch_size","title":"<code>batch_size</code>","text":"<p>Number of metric entries to batch before sending to ClickHouse. Type: <code>integer</code> Default: <code>100</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#flush_interval_ms","title":"<code>flush_interval_ms</code>","text":"<p>Maximum time in milliseconds between flushes. Type: <code>integer</code> Default: <code>5000</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#create_table","title":"<code>create_table</code>","text":"<p>Automatically create the metrics table if it doesn't exist. Type: <code>boolean</code> Default: <code>true</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#ttl_days","title":"<code>ttl_days</code>","text":"<p>Time-to-live for metrics in days. Set to <code>0</code> to disable automatic expiration. Type: <code>integer</code> Default: <code>0</code> Required: <code>false</code></p>"},{"location":"metrics/clickhouse#available-metrics","title":"Available Metrics","text":"<p>The following metrics can be tracked:</p> Metric Name Type Description <code>total_received</code> counter Total messages received from input <code>total_completed</code> counter Messages successfully processed <code>total_process_errors</code> counter Messages with processing errors <code>total_output_errors</code> counter Messages with output errors <code>streams_started</code> counter Streams initiated <code>streams_completed</code> counter Streams finished <code>duplicates_rejected</code> counter Duplicate messages rejected <code>stale_entries_removed</code> counter Stale entries cleaned up <code>in_flight</code> gauge Messages currently being processed <code>throughput_per_sec</code> gauge Processing throughput (messages/sec) <code>input_bytes</code> counter Total input bytes received <code>output_bytes</code> counter Total output bytes written <code>bytes_per_sec</code> gauge Throughput in bytes per second <code>latency_avg_ms</code> gauge Average message processing latency in milliseconds <code>latency_min_ms</code> gauge Minimum message processing latency in milliseconds <code>latency_max_ms</code> gauge Maximum message processing latency in milliseconds"},{"location":"metrics/clickhouse#table-schema","title":"Table Schema","text":"<p>When <code>create_table: true</code>, the following table is created:</p> <pre><code>CREATE TABLE IF NOT EXISTS fiddler.metrics (\n    timestamp DateTime64(3),\n    metric_name String,\n    metric_value Float64\n    [, dimension1 String, dimension2 String, ...]\n) ENGINE = MergeTree()\nORDER BY (timestamp, metric_name)\n[TTL toDateTime(timestamp) + INTERVAL n DAY]\n</code></pre>"},{"location":"metrics/clickhouse#with-dimensions-example","title":"With Dimensions Example","text":"<pre><code>CREATE TABLE IF NOT EXISTS fiddler.metrics (\n    timestamp DateTime64(3),\n    metric_name String,\n    metric_value Float64,\n    environment String,\n    pipeline String\n) ENGINE = MergeTree()\nORDER BY (timestamp, metric_name)\nTTL toDateTime(timestamp) + INTERVAL 30 DAY\n</code></pre>"},{"location":"metrics/clickhouse#metric-filtering","title":"Metric Filtering","text":""},{"location":"metrics/clickhouse#include-filter","title":"Include Filter","text":"<p>Only track specific metrics: <pre><code>metrics:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    include:\n      - total_received\n      - total_completed\n      - throughput_per_sec\n</code></pre></p>"},{"location":"metrics/clickhouse#exclude-filter","title":"Exclude Filter","text":"<p>Track all metrics except specific ones: <pre><code>metrics:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    exclude:\n      - stale_entries_removed\n      - duplicates_rejected\n</code></pre></p>"},{"location":"metrics/clickhouse#combined-filters","title":"Combined Filters","text":"<p>Include is applied first, then exclude: <pre><code>metrics:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    include:\n      - total_received\n      - total_completed\n      - total_process_errors\n      - total_output_errors\n    exclude:\n      - total_output_errors  # Will be excluded\n</code></pre></p>"},{"location":"metrics/clickhouse#querying-metrics","title":"Querying Metrics","text":""},{"location":"metrics/clickhouse#recent-throughput","title":"Recent Throughput","text":"<pre><code>SELECT\n    toStartOfMinute(timestamp) AS minute,\n    avg(metric_value) AS avg_throughput\nFROM fiddler.metrics\nWHERE metric_name = 'throughput_per_sec'\n  AND timestamp &gt; now() - INTERVAL 1 HOUR\nGROUP BY minute\nORDER BY minute\n</code></pre>"},{"location":"metrics/clickhouse#error-rate-over-time","title":"Error Rate Over Time","text":"<pre><code>SELECT\n    toStartOfHour(timestamp) AS hour,\n    sumIf(metric_value, metric_name = 'total_process_errors') AS errors,\n    sumIf(metric_value, metric_name = 'total_completed') AS completed,\n    errors / (errors + completed) * 100 AS error_rate_pct\nFROM fiddler.metrics\nWHERE timestamp &gt; now() - INTERVAL 24 HOUR\nGROUP BY hour\nORDER BY hour\n</code></pre>"},{"location":"metrics/clickhouse#by-pipeline-with-dimensions","title":"By Pipeline (with dimensions)","text":"<pre><code>SELECT\n    pipeline,\n    max(metric_value) AS max_throughput\nFROM fiddler.metrics\nWHERE metric_name = 'throughput_per_sec'\n  AND timestamp &gt; now() - INTERVAL 1 HOUR\nGROUP BY pipeline\n</code></pre>"},{"location":"metrics/clickhouse#connection-settings","title":"Connection Settings","text":"Setting Value Max idle connections per host 2 Idle timeout 90 seconds Request timeout 30 seconds Connection timeout 10 seconds Channel buffer 1000 entries"},{"location":"metrics/clickhouse#full-pipeline-example","title":"Full Pipeline Example","text":"<pre><code>label: Production Pipeline\ninput:\n  http_server:\n    port: 8080\nprocessors:\n  - fiddlerscript:\n      source: |\n        root = this\noutput:\n  clickhouse:\n    url: \"http://clickhouse:8123\"\n    database: events\n    table: raw_events\nmetrics:\n  interval: 30\n  clickhouse:\n    url: \"http://clickhouse:8123\"\n    database: observability\n    table: pipeline_metrics\n    dimensions:\n      - name: pipeline\n        value: production_ingestion\n      - name: environment\n        value: prod\n    include:\n      - total_received\n      - total_completed\n      - throughput_per_sec\n      - in_flight\n    batch_size: 50\n    flush_interval_ms: 3000\n    ttl_days: 90\n</code></pre>"},{"location":"metrics/clickhouse#performance-considerations","title":"Performance Considerations","text":""},{"location":"metrics/clickhouse#buffer-overflow","title":"Buffer Overflow","text":"<p>If metrics are generated faster than they can be sent, a warning is logged: <pre><code>WARN Metrics channel full, dropping metric. Consider increasing batch_size or reducing flush_interval_ms\n</code></pre></p> <p>Solutions: - Increase <code>batch_size</code> for higher throughput - Decrease <code>flush_interval_ms</code> for more frequent flushes - Use <code>include</code> filter to reduce metric volume</p>"},{"location":"metrics/clickhouse#ttl-for-storage-management","title":"TTL for Storage Management","text":"<p>Use <code>ttl_days</code> to automatically expire old metrics: <pre><code>metrics:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    ttl_days: 30  # Keep 30 days of metrics\n</code></pre></p>"},{"location":"metrics/clickhouse#graceful-shutdown","title":"Graceful Shutdown","text":"<p>On shutdown, remaining buffered metrics are flushed with a 5-second timeout to ensure data is not lost.</p>"},{"location":"metrics/cloudwatch","title":"cloudwatch","text":"<p>Send metrics to AWS CloudWatch for centralized monitoring and alerting.</p> <p>!!! note \"Feature Flag Required\"     This metrics backend requires the <code>aws</code> feature to be enabled when building fiddler.     <pre><code>cargo build --features aws\n</code></pre></p> BasicWith NamespaceWith FilteringFull Example <pre><code>metrics:\n  cloudwatch: {}\n</code></pre> <pre><code>metrics:\n  cloudwatch:\n    namespace: \"MyApplication\"\n    region: \"us-east-1\"\n</code></pre> <pre><code>metrics:\n  cloudwatch:\n    namespace: \"Fiddler\"\n    include:\n      - total_received\n      - total_completed\n      - throughput_per_sec\n    exclude:\n      - stale_entries_removed\n</code></pre> <pre><code>label: Production Pipeline\nmetrics:\n  cloudwatch:\n    namespace: \"Fiddler/Production\"\n    region: \"us-west-2\"\n    credentials:\n      access_key_id: \"AKIAIOSFODNN7EXAMPLE\"\n      secret_access_key: \"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\"\n    dimensions:\n      - name: Environment\n        value: production\n      - name: Service\n        value: data-pipeline\n    include:\n      - total_received\n      - total_completed\n      - total_process_errors\n      - total_output_errors\n      - in_flight\n      - throughput_per_sec\ninput:\n  stdin: {}\nprocessors:\n  - noop: {}\noutput:\n  stdout: {}\n</code></pre>"},{"location":"metrics/cloudwatch#fields","title":"Fields","text":"Field Type Default Description <code>namespace</code> string <code>\"Fiddler\"</code> CloudWatch namespace for organizing metrics <code>region</code> string AWS default AWS region (uses default provider chain if not set) <code>credentials</code> object AWS default Explicit AWS credentials (uses default provider chain if not set) <code>include</code> array all metrics List of metric names to include <code>exclude</code> array none List of metric names to exclude <code>dimensions</code> array none Additional dimensions to add to all metrics"},{"location":"metrics/cloudwatch#credentials-object","title":"Credentials Object","text":"Field Type Required Description <code>access_key_id</code> string Yes AWS access key ID <code>secret_access_key</code> string Yes AWS secret access key <code>session_token</code> string No AWS session token (for temporary credentials)"},{"location":"metrics/cloudwatch#dimension-object","title":"Dimension Object","text":"Field Type Required Description <code>name</code> string Yes Dimension name <code>value</code> string Yes Dimension value"},{"location":"metrics/cloudwatch#available-metrics","title":"Available Metrics","text":"<p>The following metrics can be included or excluded:</p> Metric Name Type Description <code>total_received</code> Count Total messages received from input <code>total_completed</code> Count Messages successfully processed through all outputs <code>total_process_errors</code> Count Messages that encountered processing errors <code>total_output_errors</code> Count Messages that encountered output errors <code>streams_started</code> Count Number of streams started <code>streams_completed</code> Count Number of streams completed <code>duplicates_rejected</code> Count Duplicate messages rejected <code>stale_entries_removed</code> Count Stale entries cleaned up from state tracker <code>in_flight</code> Count Current number of messages being processed <code>throughput_per_sec</code> Count/Second Current throughput in messages per second"},{"location":"metrics/cloudwatch#metric-filtering","title":"Metric Filtering","text":"<p>By default, all metrics are published to CloudWatch. You can control which metrics are sent using the <code>include</code> and <code>exclude</code> fields:</p> <ul> <li>include: When specified, only the listed metrics are published. If empty or omitted, all metrics are included.</li> <li>exclude: Metrics listed here are never published, even if they appear in <code>include</code>.</li> </ul> <p>The <code>exclude</code> filter is applied after <code>include</code>, allowing you to include most metrics while excluding specific ones.</p>"},{"location":"metrics/cloudwatch#example-only-performance-metrics","title":"Example: Only Performance Metrics","text":"<pre><code>metrics:\n  cloudwatch:\n    include:\n      - throughput_per_sec\n      - in_flight\n</code></pre>"},{"location":"metrics/cloudwatch#example-all-except-cleanup-metrics","title":"Example: All Except Cleanup Metrics","text":"<pre><code>metrics:\n  cloudwatch:\n    exclude:\n      - stale_entries_removed\n      - duplicates_rejected\n</code></pre>"},{"location":"metrics/cloudwatch#aws-authentication","title":"AWS Authentication","text":"<p>The CloudWatch backend supports multiple authentication methods:</p>"},{"location":"metrics/cloudwatch#1-default-provider-chain-recommended","title":"1. Default Provider Chain (Recommended)","text":"<p>When no credentials are specified, the AWS SDK uses its default credential provider chain:</p> <ol> <li>Environment variables (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>)</li> <li>Shared credentials file (<code>~/.aws/credentials</code>)</li> <li>IAM role (when running on EC2, ECS, Lambda, etc.)</li> </ol> <pre><code>metrics:\n  cloudwatch:\n    region: \"us-east-1\"\n</code></pre>"},{"location":"metrics/cloudwatch#2-explicit-credentials","title":"2. Explicit Credentials","text":"<p>For development or specific use cases, you can provide credentials directly:</p> <pre><code>metrics:\n  cloudwatch:\n    credentials:\n      access_key_id: \"AKIAIOSFODNN7EXAMPLE\"\n      secret_access_key: \"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\"\n</code></pre> <p>!!! warning \"Security\"     Avoid committing credentials to version control. Use environment variables or IAM roles for production deployments.</p>"},{"location":"metrics/cloudwatch#cloudwatch-dimensions","title":"CloudWatch Dimensions","text":"<p>Dimensions allow you to categorize and filter metrics in CloudWatch. Common use cases include:</p> <ul> <li>Distinguishing between environments (dev, staging, production)</li> <li>Identifying specific services or pipelines</li> <li>Grouping by region or availability zone</li> </ul> <pre><code>metrics:\n  cloudwatch:\n    dimensions:\n      - name: Environment\n        value: production\n      - name: Pipeline\n        value: logs-processor\n</code></pre> <p>All configured dimensions are attached to every metric published.</p>"},{"location":"metrics/cloudwatch#iam-permissions","title":"IAM Permissions","text":"<p>The CloudWatch backend requires the following IAM permissions:</p> <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudwatch:PutMetricData\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre> <p>You can restrict the <code>Resource</code> to specific namespaces using conditions:</p> <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"cloudwatch:PutMetricData\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"cloudwatch:namespace\": \"Fiddler\"\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"metrics/cloudwatch#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Non-blocking: Metrics are published asynchronously using a background task</li> <li>Buffered: A bounded channel (100 entries) prevents backpressure from affecting pipeline performance</li> <li>Dropped on overflow: If the channel is full, metrics are dropped rather than blocking the pipeline</li> </ul>"},{"location":"metrics/cloudwatch#viewing-metrics-in-cloudwatch","title":"Viewing Metrics in CloudWatch","text":"<ol> <li>Open the AWS CloudWatch console</li> <li>Navigate to Metrics &gt; All metrics</li> <li>Select your namespace (default: \"Fiddler\")</li> <li>Browse or search for specific metric names</li> </ol>"},{"location":"metrics/cloudwatch#example-cloudwatch-insights-query","title":"Example CloudWatch Insights Query","text":"<pre><code>SELECT AVG(throughput_per_sec), MAX(in_flight)\nFROM SCHEMA(\"Fiddler\", Environment, Pipeline)\nWHERE Environment = 'production'\nGROUP BY Pipeline\nORDER BY AVG(throughput_per_sec) DESC\n</code></pre>"},{"location":"metrics/cloudwatch#troubleshooting","title":"Troubleshooting","text":""},{"location":"metrics/cloudwatch#metrics-not-appearing","title":"Metrics Not Appearing","text":"<ol> <li>Verify the <code>aws</code> feature is enabled in your build</li> <li>Check IAM permissions for <code>cloudwatch:PutMetricData</code></li> <li>Confirm the correct region is configured</li> <li>Look for error logs indicating CloudWatch API failures</li> </ol>"},{"location":"metrics/cloudwatch#high-latency","title":"High Latency","text":"<p>CloudWatch has API rate limits. If you're publishing many metrics frequently:</p> <ol> <li>Consider using the <code>include</code> filter to reduce metric count</li> <li>Increase the metrics interval in your pipeline configuration</li> <li>Use dimensions to aggregate related data points</li> </ol>"},{"location":"metrics/prometheus","title":"prometheus","text":"<p>Expose metrics via a Prometheus-compatible endpoint using the <code>metrics</code> crate.</p> <p>!!! note \"Feature Flag Required\"     This metrics backend requires the <code>prometheus</code> feature to be enabled when building fiddler.     <pre><code>cargo build --features prometheus\n</code></pre></p> BasicFull Example <pre><code>metrics:\n  prometheus: {}\n</code></pre> <pre><code>label: My Pipeline\nmetrics:\n  prometheus: {}\ninput:\n  stdin: {}\nprocessors:\n  - noop: {}\noutput:\n  stdout: {}\n</code></pre>"},{"location":"metrics/prometheus#exposed-metrics","title":"Exposed Metrics","text":"<p>The following Prometheus metrics are exposed:</p>"},{"location":"metrics/prometheus#counters","title":"Counters","text":"Metric Name Description <code>fiddler_messages_received_total</code> Total messages received from input <code>fiddler_messages_completed_total</code> Messages successfully processed through all outputs <code>fiddler_messages_process_errors_total</code> Messages that encountered processing errors <code>fiddler_messages_output_errors_total</code> Messages that encountered output errors <code>fiddler_streams_started_total</code> Number of streams started <code>fiddler_streams_completed_total</code> Number of streams completed <code>fiddler_duplicates_rejected_total</code> Duplicate messages rejected <code>fiddler_stale_entries_removed_total</code> Stale entries cleaned up <code>fiddler_input_bytes_total</code> Total bytes received from input <code>fiddler_output_bytes_total</code> Total bytes written to output"},{"location":"metrics/prometheus#gauges","title":"Gauges","text":"Metric Name Description <code>fiddler_messages_in_flight</code> Current number of messages being processed <code>fiddler_throughput_per_second</code> Current throughput in messages per second <code>fiddler_bytes_per_second</code> Current throughput in bytes per second <code>fiddler_latency_avg_ms</code> Average message processing latency in milliseconds <code>fiddler_latency_min_ms</code> Minimum message processing latency in milliseconds <code>fiddler_latency_max_ms</code> Maximum message processing latency in milliseconds"},{"location":"metrics/prometheus#scraping-metrics","title":"Scraping Metrics","text":"<p>The Prometheus exporter uses the default configuration from <code>metrics-exporter-prometheus</code>. Metrics are typically available at <code>http://localhost:9000/metrics</code> (default port).</p>"},{"location":"metrics/prometheus#example-prometheus-configuration","title":"Example Prometheus Configuration","text":"<pre><code>scrape_configs:\n  - job_name: 'fiddler'\n    static_configs:\n      - targets: ['localhost:9000']\n</code></pre>"},{"location":"metrics/prometheus#fields","title":"Fields","text":"<p>Currently, the prometheus backend accepts an empty configuration object. Future versions may support additional configuration options such as:</p> <ul> <li>Custom port binding</li> <li>Custom endpoint path</li> <li>Default labels</li> </ul>"},{"location":"metrics/prometheus#example-future-configuration-not-yet-implemented","title":"Example Future Configuration (Not Yet Implemented)","text":"<pre><code>metrics:\n  prometheus:\n    port: 9090\n    path: /metrics\n    labels:\n      environment: production\n      service: my-pipeline\n</code></pre>"},{"location":"metrics/stdout","title":"stdout","text":"<p>Output metrics as JSON to stdout for debugging and local development.</p> BasicPretty Print <pre><code>metrics:\n  stdout: {}\n</code></pre> <pre><code>metrics:\n  interval: 60\n  stdout:\n    pretty: true\n</code></pre>"},{"location":"metrics/stdout#fields","title":"Fields","text":""},{"location":"metrics/stdout#pretty","title":"<code>pretty</code>","text":"<p>Enable pretty-printed JSON output with indentation. Type: <code>boolean</code> Default: <code>false</code> Required: <code>false</code></p>"},{"location":"metrics/stdout#output-format","title":"Output Format","text":""},{"location":"metrics/stdout#standard-output-pretty-false","title":"Standard Output (pretty: false)","text":"<pre><code>{\"total_received\":1000,\"total_completed\":998,\"total_process_errors\":2,\"total_output_errors\":0,\"streams_started\":0,\"streams_completed\":0,\"duplicates_rejected\":0,\"stale_entries_removed\":0,\"in_flight\":5,\"throughput_per_sec\":123.45,\"input_bytes\":102400,\"output_bytes\":98304,\"bytes_per_sec\":9830.4,\"latency_avg_ms\":5.5,\"latency_min_ms\":1.2,\"latency_max_ms\":15.8}\n</code></pre>"},{"location":"metrics/stdout#pretty-output-pretty-true","title":"Pretty Output (pretty: true)","text":"<pre><code>{\n  \"total_received\": 1000,\n  \"total_completed\": 998,\n  \"total_process_errors\": 2,\n  \"total_output_errors\": 0,\n  \"streams_started\": 0,\n  \"streams_completed\": 0,\n  \"duplicates_rejected\": 0,\n  \"stale_entries_removed\": 0,\n  \"in_flight\": 5,\n  \"throughput_per_sec\": 123.45,\n  \"input_bytes\": 102400,\n  \"output_bytes\": 98304,\n  \"bytes_per_sec\": 9830.4,\n  \"latency_avg_ms\": 5.5,\n  \"latency_min_ms\": 1.2,\n  \"latency_max_ms\": 15.8\n}\n</code></pre>"},{"location":"metrics/stdout#available-metrics","title":"Available Metrics","text":"Field Type Description <code>total_received</code> integer Total messages received from input <code>total_completed</code> integer Messages successfully processed <code>total_process_errors</code> integer Messages with processing errors <code>total_output_errors</code> integer Messages with output errors <code>streams_started</code> integer Streams initiated <code>streams_completed</code> integer Streams finished <code>duplicates_rejected</code> integer Duplicate messages rejected <code>stale_entries_removed</code> integer Stale entries cleaned up <code>in_flight</code> integer Messages currently being processed <code>throughput_per_sec</code> float Processing throughput (messages/sec) <code>input_bytes</code> integer Total input bytes received <code>output_bytes</code> integer Total output bytes written <code>bytes_per_sec</code> float Throughput in bytes per second <code>latency_avg_ms</code> float Average message processing latency in milliseconds <code>latency_min_ms</code> float Minimum message processing latency in milliseconds <code>latency_max_ms</code> float Maximum message processing latency in milliseconds"},{"location":"metrics/stdout#use-cases","title":"Use Cases","text":""},{"location":"metrics/stdout#development-and-debugging","title":"Development and Debugging","text":"<p>Monitor pipeline behavior during development: <pre><code>label: Debug Pipeline\ninput:\n  file:\n    filename: test_data.jsonl\n    codec: Lines\nprocessors:\n  - fiddlerscript:\n      source: |\n        root = this\noutput:\n  stdout: {}\nmetrics:\n  interval: 5\n  stdout:\n    pretty: true\n</code></pre></p>"},{"location":"metrics/stdout#piping-to-log-aggregator","title":"Piping to Log Aggregator","text":"<p>Send metrics to an external system: <pre><code>fiddler run config.yml 2&gt;&amp;1 | grep '\"total_received\"' | your-log-aggregator\n</code></pre></p>"},{"location":"metrics/stdout#cicd-testing","title":"CI/CD Testing","text":"<p>Verify pipeline metrics in automated tests: <pre><code>fiddler run config.yml 2&gt;&amp;1 | jq '.throughput_per_sec'\n</code></pre></p>"},{"location":"metrics/stdout#notes","title":"Notes","text":"<ul> <li>Metrics are written to stdout, interleaved with any <code>stdout</code> output module data</li> <li>For production use, consider <code>prometheus</code> or <code>clickhouse</code> metrics backends</li> <li>The <code>interval</code> setting in the parent <code>metrics</code> block controls how often metrics are printed (default: 300 seconds)</li> </ul>"},{"location":"outputs/About","title":"Output","text":"<p>The sinks of fiddler are described as outputs.  There may only be one output per configuration item.  Output key names must be uniquely registered across all available fiddler outputs.</p> <pre><code>output:\n  label: standard out\n  stdout: {}\n</code></pre>"},{"location":"outputs/About#available-outputs","title":"Available Outputs","text":"Output Description Feature Flag clickhouse Send to ClickHouse database <code>clickhouse</code> drop Discard messages - elasticsearch Send to Elasticsearch <code>elasticsearch</code> stdout Write to standard output - switch Route to different outputs based on conditions - aws_sqs Send to AWS SQS queues <code>aws</code>"},{"location":"outputs/aws_sqs","title":"aws_sqs","text":"<p>Send messages to an AWS SQS Queue</p> RequiredFull <pre><code>output:\n    aws_sqs:\n        queue_url: \"https://some_queue_url\"\n</code></pre> <pre><code>output:\n    aws_sqs:\n        queue_url: \"https://some_queue_url\"\n        endpoint_url: \"https://some_unique_endpoint\"\n        credentials:\n            access_key_id: \"AccessKey\"\n            secret_access_key: \"SecretKey\"\n            session_token: \"SessionToken\"\n        region: \"us-west-2\"\n</code></pre>"},{"location":"outputs/aws_sqs#fields","title":"Fields","text":""},{"location":"outputs/aws_sqs#queue_url","title":"<code>queue_url</code>","text":"<p>AWS SQS Queue URL to utilize Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"outputs/aws_sqs#endpoint_url","title":"<code>endpoint_url</code>","text":"<p>Custom AWS SQS Endpoint URL Type: <code>string</code> Required: <code>false</code> </p>"},{"location":"outputs/aws_sqs#credentials","title":"<code>credentials</code>","text":"<p>AWS Credentials Object to utilize.  If no credentials object is provided, fiddler will utilize standard SDK locations to pull in credentials. Type: <code>object</code> Properties: <code>access_key_id</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Access Key ID \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>secret_access_key</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Secret Access Key \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>true</code> <code>session_token</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AWS Session Token \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Type: <code>string</code> \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Required: <code>false</code>  Required: <code>false</code></p>"},{"location":"outputs/aws_sqs#credentials_1","title":"Credentials","text":"<p>Required IAM permissions to operate: - sqs:SendMessage</p>"},{"location":"outputs/clickhouse","title":"clickhouse","text":"<p>Send events to ClickHouse database using batch inserts.</p> <p>!!! note \"Feature Flag Required\"     This output requires the <code>clickhouse</code> feature to be enabled when building fiddler.     <pre><code>cargo build --features clickhouse\n</code></pre></p> BasicFull <pre><code>output:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    table: events\n</code></pre> <pre><code>output:\n  clickhouse:\n    url: \"http://localhost:8123\"\n    database: default\n    table: events\n    username: default\n    password: secret\n    batch:\n      size: 1000\n      duration: 10s\n    create_table: true\n    columns:\n      - name: timestamp\n        type: DateTime64(3)\n      - name: event_type\n        type: String\n      - name: data\n        type: String\n</code></pre>"},{"location":"outputs/clickhouse#fields","title":"Fields","text":""},{"location":"outputs/clickhouse#url","title":"<code>url</code>","text":"<p>ClickHouse HTTP interface URL. Type: <code>string</code> Required: <code>true</code></p>"},{"location":"outputs/clickhouse#database","title":"<code>database</code>","text":"<p>Target database name. Type: <code>string</code> Default: <code>\"default\"</code> Required: <code>false</code></p>"},{"location":"outputs/clickhouse#table","title":"<code>table</code>","text":"<p>Target table name. Type: <code>string</code> Required: <code>true</code></p>"},{"location":"outputs/clickhouse#username","title":"<code>username</code>","text":"<p>Username for authentication. Type: <code>string</code> Required: <code>false</code></p>"},{"location":"outputs/clickhouse#password","title":"<code>password</code>","text":"<p>Password for authentication. Type: <code>string</code> Required: <code>false</code></p>"},{"location":"outputs/clickhouse#batch","title":"<code>batch</code>","text":"<p>Batching policy for writes. Type: <code>object</code> Required: <code>false</code></p>"},{"location":"outputs/clickhouse#batchsize","title":"<code>batch.size</code>","text":"<p>Maximum number of messages per batch. Type: <code>integer</code> Default: <code>500</code></p>"},{"location":"outputs/clickhouse#batchduration","title":"<code>batch.duration</code>","text":"<p>Maximum time to wait before flushing a batch. Type: <code>duration</code> Default: <code>10s</code></p>"},{"location":"outputs/clickhouse#create_table","title":"<code>create_table</code>","text":"<p>Automatically create the table if it doesn't exist. Requires <code>columns</code> to be defined. Type: <code>boolean</code> Default: <code>false</code> Required: <code>false</code></p>"},{"location":"outputs/clickhouse#columns","title":"<code>columns</code>","text":"<p>Column definitions for automatic table creation. Type: <code>array</code> Required: <code>false</code> (required if <code>create_table: true</code>)</p>"},{"location":"outputs/clickhouse#column-object","title":"Column Object","text":"Field Type Description <code>name</code> string Column name <code>type</code> string ClickHouse data type (e.g., <code>String</code>, <code>DateTime64(3)</code>, <code>UInt64</code>)"},{"location":"outputs/clickhouse#message-format","title":"Message Format","text":"<p>Messages must be valid JSON objects. Each JSON object becomes one row in ClickHouse. JSON keys must match the column names in your table.</p> <p>Example Message: <pre><code>{\"timestamp\": \"2024-01-15T10:30:00Z\", \"event_type\": \"click\", \"user_id\": 123}\n</code></pre></p>"},{"location":"outputs/clickhouse#table-creation","title":"Table Creation","text":"<p>When <code>create_table: true</code>, fiddler creates a table with the MergeTree engine:</p> <pre><code>CREATE TABLE IF NOT EXISTS database.table (\n    timestamp DateTime64(3),\n    event_type String,\n    data String\n) ENGINE = MergeTree()\nORDER BY timestamp\n</code></pre> <p>!!! warning \"Column Order\"     The <code>ORDER BY</code> clause uses the first column defined. Ensure your first column is suitable for ordering (typically a timestamp).</p>"},{"location":"outputs/clickhouse#connection-settings","title":"Connection Settings","text":"<p>The ClickHouse output uses the following HTTP client settings:</p> Setting Value Max idle connections per host 2 Idle timeout 90 seconds Request timeout 60 seconds Connection timeout 10 seconds"},{"location":"outputs/clickhouse#security","title":"Security","text":""},{"location":"outputs/clickhouse#sql-injection-prevention","title":"SQL Injection Prevention","text":"<p>All identifiers (database, table, column names) are validated to prevent SQL injection:</p> <ul> <li>Must start with a letter or underscore</li> <li>Can only contain alphanumeric characters and underscores</li> <li>Cannot be empty</li> </ul>"},{"location":"outputs/clickhouse#authentication","title":"Authentication","text":"<p>Supports HTTP Basic Authentication when <code>username</code> and <code>password</code> are provided.</p>"},{"location":"outputs/clickhouse#full-pipeline-example","title":"Full Pipeline Example","text":"<pre><code>label: Events to ClickHouse\ninput:\n  http_server:\n    port: 8080\n    path: \"/events\"\nprocessors:\n  - fiddlerscript:\n      source: |\n        root.timestamp = timestamp()\n        root.event_type = this.type\n        root.payload = encode_json(this)\noutput:\n  clickhouse:\n    url: \"http://clickhouse:8123\"\n    database: analytics\n    table: events\n    username: fiddler\n    password: \"${CLICKHOUSE_PASSWORD}\"\n    batch:\n      size: 1000\n      duration: 5s\n    create_table: true\n    columns:\n      - name: timestamp\n        type: DateTime64(3)\n      - name: event_type\n        type: String\n      - name: payload\n        type: String\n</code></pre>"},{"location":"outputs/clickhouse#performance-tuning","title":"Performance Tuning","text":""},{"location":"outputs/clickhouse#batch-size","title":"Batch Size","text":"<p>Larger batch sizes improve throughput but increase memory usage and latency:</p> Batch Size Use Case 100-500 Low-latency requirements 500-1000 Balanced (default) 1000-5000 High-throughput bulk loading"},{"location":"outputs/clickhouse#batch-duration","title":"Batch Duration","text":"<p>Controls maximum wait time before flushing:</p> <ul> <li>Lower values (1-5s): Better for real-time data</li> <li>Higher values (10-30s): Better for batch processing</li> </ul>"},{"location":"outputs/drop","title":"drop","text":"<p>Discard messages sent to this output</p> Required <pre><code>output:\n    drop: {}\n</code></pre>"},{"location":"outputs/elasticsearch","title":"elasticsearch","text":"<p>Send events to elasticsearch</p> RequiredFull <pre><code>output:\n    elasticsearch:\n        url: https://127.0.0.1:9200\n        index: my_index\n</code></pre> <pre><code>output:\n    elasticsearch:\n        url: https://127.0.0.1:9200\n        username: elastic\n        password: changeme\n        cloud_id: someId\n        index: my_index\n        cert_validation: Default\n</code></pre>"},{"location":"outputs/elasticsearch#fields","title":"Fields","text":""},{"location":"outputs/elasticsearch#url","title":"<code>url</code>","text":"<p>Elasticsearch URL to utilize Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"outputs/elasticsearch#username","title":"<code>username</code>","text":"<p>Elasticsearch username to use Type: <code>string</code> Required: <code>false</code>.  </p>"},{"location":"outputs/elasticsearch#password","title":"<code>password</code>","text":"<p>Password for the elasticsearch user   Type: <code>string</code> Required: <code>false</code> </p>"},{"location":"outputs/elasticsearch#cloud_id","title":"<code>cloud_id</code>","text":"<p>Elasticsearch CloudID Type: <code>string</code> Required: <code>false</code>.  </p>"},{"location":"outputs/elasticsearch#index","title":"<code>index</code>","text":"<p>Elasticsearch index to utilize.  default behavior is to append <code>YYYY-MM-DD</code> to the index name.  i.e. index of <code>index</code> would send to <code>index-YYYY-MM-DD</code> where the date chosen is the date of ingest. Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"outputs/elasticsearch#cert_validation","title":"<code>cert_validation</code>","text":"<p>Enum to identify which type of certification validation is utilized Type: <code>string</code> AcceptedValues: <code>Default</code>: default mechanisms utilized by elasticsearch's SDK [default] <code>None</code>: Do not perform certification validation   Required: <code>false</code> </p>"},{"location":"outputs/stdout","title":"stdout","text":"<p>Emit process messages to stdout</p> Required <pre><code>output:\n    stdout: {}\n</code></pre>"},{"location":"outputs/switch","title":"switch","text":"<p>Switch accepts an array of valid outputs and is expected to be utlized with the <code>check</code> output.  Switch will attempt each provided output; while failing to the next provided the error is returned is <code>ConditionalCheckfailed</code>.  Other encountered errors will be surfaced.</p> Required <pre><code>output:\n  switch: []\n</code></pre>"},{"location":"outputs/switch#check","title":"<code>check</code>","text":"Required <pre><code>output:\n  switch:\n    - check:\n        condition: '\\\"Hello World\\\" &gt; `5`'\n        output: \n          stdout: {}\"\n</code></pre>"},{"location":"outputs/switch#fields","title":"Fields","text":""},{"location":"outputs/switch#condition","title":"<code>condition</code>","text":"<p>Condition utilized for the execution of the output step utilizing jmespath syntax for evaluation.  As such, this can only be utilized with JSON documents. Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"outputs/switch#output","title":"<code>output</code>","text":"<p>Valid fiddler output module Type: <code>object</code> Required: <code>true</code> </p>"},{"location":"processors/About","title":"Processors","text":"<p>Processors in fiddler handle all of the data transformation operations on the messages received from Inputs.  Each Processor receives a single Message and is expected to return one to many messages as a result.  Each result is forward along to processors later in the array; or to the desired output.</p> <pre><code>processors:\n  - label: lines\n    lines: {}\n  - label: noop\n    noop: {}\n  - label: pretty print\n    python:\n      string: true\n      code: |\n        import json\n        root = json.dumps(json.loads(root), indent=4)\n</code></pre>"},{"location":"processors/compress","title":"compress","text":"<p>Compress the message being processed</p> RequiredFull <pre><code>processors:\n    - compress: {}\n</code></pre> <pre><code>processors:\n    - compress: \n        algorithm: Gzip\n</code></pre>"},{"location":"processors/compress#fields","title":"Fields","text":""},{"location":"processors/compress#algorithm","title":"<code>algorithm</code>","text":"<p>The compression algorithm to use.  [Default: Gzip]   Type: <code>string</code> Required: <code>false</code> Accepted values:  <code>Gzip</code>: compress the message using gzip. <code>Zip</code>: compress the message using deflate <code>Zlib</code>: compress the message using zlib  </p>"},{"location":"processors/decode","title":"decode","text":"<p>Decode the message</p> RequiredFull <pre><code>processors:\n    - decode: {}\n</code></pre> <pre><code>processors:\n    - decode: \n        algorithm: Base64\n</code></pre>"},{"location":"processors/decode#fields","title":"Fields","text":""},{"location":"processors/decode#algorithm","title":"<code>algorithm</code>","text":"<p>The decoding algorithm to use.  [Default: Base64]   Type: <code>string</code> Required: <code>false</code> Accepted values:  <code>Base64</code>: decode the message as base64  </p>"},{"location":"processors/decompress","title":"decompress","text":"<p>Decompress the message being processed</p> RequiredFull <pre><code>processors:\n    - decompress: {}\n</code></pre> <pre><code>processors:\n    - decompress: \n        algorithm: Gzip\n</code></pre>"},{"location":"processors/decompress#fields","title":"Fields","text":""},{"location":"processors/decompress#algorithm","title":"<code>algorithm</code>","text":"<p>The compression algorithm to use.  [Default: Gzip]   Type: <code>string</code> Required: <code>false</code> Accepted values:  <code>Gzip</code>: decode the message as base64 <code>Zip</code>: decode the message as base64 <code>Zlib</code>: decode the message as base64  </p>"},{"location":"processors/fiddlerscript","title":"fiddlerscript","text":"<p>FiddlerScript is the built-in scripting language for inline message manipulation in Fiddler. It provides a lightweight, C-style syntax for transforming messages without external dependencies.</p> BasicMultiple MessagesJSON Processing <pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let text = bytes_to_string(this);\n        this = bytes(text + \" processed\");\n</code></pre> <pre><code>processors:\n  - fiddlerscript:\n      code: |\n        // Split into multiple messages\n        this = array(bytes(\"msg1\"), bytes(\"msg2\"), bytes(\"msg3\"));\n</code></pre> <pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let data = parse_json(this);\n        let name = get(data, \"name\");\n        this = bytes(name);\n</code></pre>"},{"location":"processors/fiddlerscript#fields","title":"Fields","text":""},{"location":"processors/fiddlerscript#code","title":"<code>code</code>","text":"<p>The FiddlerScript code to execute for each message. Type: <code>string</code> Required: <code>true</code></p>"},{"location":"processors/fiddlerscript#variables","title":"Variables","text":"<p>The following variables are available in your script:</p>"},{"location":"processors/fiddlerscript#this","title":"<code>this</code>","text":"<p>The message content as bytes. This is the primary input and output variable.</p> <ul> <li>Input: Contains the raw bytes of the incoming message</li> <li>Output: Set this to the desired output bytes, or an array of bytes for multiple messages</li> </ul> <pre><code>// Read the message\nlet text = bytes_to_string(this);\n\n// Modify and write back\nthis = bytes(text + \" modified\");\n</code></pre>"},{"location":"processors/fiddlerscript#metadata","title":"<code>metadata</code>","text":"<p>A dictionary containing the message metadata. Keys are strings, values can be any type.</p> <pre><code>// Access metadata\nlet source = get(metadata, \"source\");\nlet timestamp = get(metadata, \"timestamp\");\n\n// Use in processing\nif (source == \"important-queue\") {\n    this = bytes(\"PRIORITY: \" + bytes_to_string(this));\n}\n</code></pre>"},{"location":"processors/fiddlerscript#returning-multiple-messages","title":"Returning Multiple Messages","text":"<p>To split a single input message into multiple output messages, set <code>this</code> to an array:</p> <pre><code>// Split message into multiple\nthis = array(bytes(\"first\"), bytes(\"second\"), bytes(\"third\"));\n</code></pre> <p>Each element in the array becomes a separate message in the pipeline.</p>"},{"location":"processors/fiddlerscript#built-in-functions","title":"Built-in Functions","text":""},{"location":"processors/fiddlerscript#data-conversion","title":"Data Conversion","text":"Function Description <code>bytes(value)</code> Convert any value to bytes <code>bytes_to_string(bytes)</code> Convert bytes to UTF-8 string <code>str(value)</code> Convert any value to string <code>int(value)</code> Convert to integer"},{"location":"processors/fiddlerscript#collections","title":"Collections","text":"Function Description <code>array(items...)</code> Create an array from arguments <code>dict()</code> Create an empty dictionary <code>push(array, value)</code> Add value to array (returns new array) <code>get(collection, key)</code> Get value by index/key <code>set(collection, key, value)</code> Set value (returns new collection) <code>delete(collection, key)</code> Remove element by index/key <code>keys(dict)</code> Get array of dictionary keys <code>len(value)</code> Get length of string/bytes/array/dict"},{"location":"processors/fiddlerscript#string-operations","title":"String Operations","text":"Function Description <code>capitalize(str)</code> Capitalize first character <code>lowercase(str)</code> Convert to lowercase <code>uppercase(str)</code> Convert to uppercase <code>trim(str)</code> Remove leading/trailing whitespace <code>trim_prefix(str, prefix)</code> Remove prefix if present <code>trim_suffix(str, suffix)</code> Remove suffix if present <code>has_prefix(str, prefix)</code> Check if starts with prefix <code>has_suffix(str, suffix)</code> Check if ends with suffix <code>split(str, delim)</code> Split by delimiter into array <code>reverse(str)</code> Reverse string <code>lines(value)</code> Split string/bytes into lines"},{"location":"processors/fiddlerscript#compression","title":"Compression","text":"Function Description <code>gzip_compress(data)</code> Compress with gzip <code>gzip_decompress(data)</code> Decompress gzip data <code>zlib_compress(data)</code> Compress with zlib <code>zlib_decompress(data)</code> Decompress zlib data <code>deflate_compress(data)</code> Compress with deflate <code>deflate_decompress(data)</code> Decompress deflate data"},{"location":"processors/fiddlerscript#encoding","title":"Encoding","text":"Function Description <code>base64_encode(data)</code> Encode as base64 string <code>base64_decode(data)</code> Decode from base64 to bytes"},{"location":"processors/fiddlerscript#json","title":"JSON","text":"Function Description <code>parse_json(bytes)</code> Parse JSON bytes into values"},{"location":"processors/fiddlerscript#type-checking","title":"Type Checking","text":"Function Description <code>is_array(value)</code> Check if value is an array <code>is_dict(value)</code> Check if value is a dictionary"},{"location":"processors/fiddlerscript#environment","title":"Environment","text":"Function Description <code>getenv(name)</code> Get environment variable (returns null if not set) <code>print(values...)</code> Print to stdout (for debugging)"},{"location":"processors/fiddlerscript#examples","title":"Examples","text":""},{"location":"processors/fiddlerscript#simple-transformation","title":"Simple Transformation","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let text = bytes_to_string(this);\n        let upper = \"\";\n        for (let i = 0; i &lt; len(text); i = i + 1) {\n            let c = get(text, i);\n            // Simple uppercase (ASCII only)\n            upper = upper + c;\n        }\n        this = bytes(upper);\n</code></pre>"},{"location":"processors/fiddlerscript#filter-by-content","title":"Filter by Content","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let text = bytes_to_string(this);\n        // Only keep messages containing \"important\"\n        if (len(text) &gt; 0) {\n            this = bytes(text);\n        } else {\n            this = bytes(\"\");  // Empty message will be processed\n        }\n</code></pre>"},{"location":"processors/fiddlerscript#parse-and-extract-json-field","title":"Parse and Extract JSON Field","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let data = parse_json(this);\n        let user = get(data, \"user\");\n        let name = get(user, \"name\");\n        let email = get(user, \"email\");\n        this = bytes(name + \" &lt;\" + email + \"&gt;\");\n</code></pre>"},{"location":"processors/fiddlerscript#split-json-array-into-messages","title":"Split JSON Array into Messages","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let data = parse_json(this);\n        let items = get(data, \"items\");\n        let messages = array();\n        for (let i = 0; i &lt; len(items); i = i + 1) {\n            let item = get(items, i);\n            messages = push(messages, bytes(str(item)));\n        }\n        this = messages;\n</code></pre>"},{"location":"processors/fiddlerscript#add-metadata-to-message","title":"Add Metadata to Message","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let source = get(metadata, \"source\");\n        let text = bytes_to_string(this);\n        let enriched = \"{\\\"source\\\": \\\"\" + source + \"\\\", \\\"data\\\": \\\"\" + text + \"\\\"}\";\n        this = bytes(enriched);\n</code></pre>"},{"location":"processors/fiddlerscript#conditional-processing","title":"Conditional Processing","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let data = parse_json(this);\n        let type = get(data, \"type\");\n\n        if (type == \"error\") {\n            // Add error prefix\n            let msg = get(data, \"message\");\n            this = bytes(\"ERROR: \" + msg);\n        } else if (type == \"warning\") {\n            let msg = get(data, \"message\");\n            this = bytes(\"WARN: \" + msg);\n        } else {\n            // Pass through unchanged\n        }\n</code></pre>"},{"location":"processors/fiddlerscript#decompress-and-process","title":"Decompress and Process","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        // Decompress gzip data\n        let decompressed = gzip_decompress(this);\n        let text = bytes_to_string(decompressed);\n\n        // Process and recompress\n        let processed = uppercase(text);\n        this = gzip_compress(processed);\n</code></pre>"},{"location":"processors/fiddlerscript#base64-decode-and-parse","title":"Base64 Decode and Parse","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        // Decode base64 payload\n        let decoded = base64_decode(this);\n        let json = parse_json(decoded);\n        let message = get(json, \"message\");\n        this = bytes(message);\n</code></pre>"},{"location":"processors/fiddlerscript#split-lines-into-messages","title":"Split Lines into Messages","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        // Split multi-line input into separate messages\n        let all_lines = lines(this);\n        let messages = array();\n        for (let i = 0; i &lt; len(all_lines); i = i + 1) {\n            let line = get(all_lines, i);\n            let trimmed = trim(line);\n            if (len(trimmed) &gt; 0) {\n                messages = push(messages, bytes(trimmed));\n            }\n        }\n        this = messages;\n</code></pre>"},{"location":"processors/fiddlerscript#string-manipulation","title":"String Manipulation","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let text = bytes_to_string(this);\n\n        // Remove prefix and normalize\n        if (has_prefix(text, \"LOG:\")) {\n            text = trim_prefix(text, \"LOG:\");\n            text = trim(text);\n            text = uppercase(text);\n        }\n\n        this = bytes(text);\n</code></pre>"},{"location":"processors/fiddlerscript#csv-line-parsing","title":"CSV Line Parsing","text":"<pre><code>processors:\n  - fiddlerscript:\n      code: |\n        let text = bytes_to_string(this);\n        let fields = split(text, \",\");\n\n        // Create JSON from CSV fields\n        let json = \"{\";\n        json = json + \"\\\"name\\\": \\\"\" + trim(get(fields, 0)) + \"\\\", \";\n        json = json + \"\\\"value\\\": \\\"\" + trim(get(fields, 1)) + \"\\\"\";\n        json = json + \"}\";\n\n        this = bytes(json);\n</code></pre>"},{"location":"processors/fiddlerscript#language-reference","title":"Language Reference","text":"<p>For complete FiddlerScript language documentation, see:</p> <ul> <li>FiddlerScript Overview</li> <li>Syntax Guide</li> <li>Built-in Functions Reference</li> </ul>"},{"location":"processors/fiddlerscript#comparison-with-python-processor","title":"Comparison with Python Processor","text":"Feature FiddlerScript Python Dependencies None (built-in) Requires Python runtime Performance Fast (compiled) Slower (interpreted) Syntax C-style Python External libraries No Yes Variable name <code>this</code> <code>root</code> Compression gzip, zlib, deflate Any library Encoding Base64 Any encoding String methods Built-in Full Python <p>Use FiddlerScript for: - Simple to moderate transformations - JSON parsing and extraction - Message splitting - Compression/decompression (gzip, zlib, deflate) - Base64 encoding/decoding - String manipulation (trim, split, case conversion) - When you want no external dependencies</p> <p>Use Python for: - Complex data processing - When you need external libraries - Regular expressions - Advanced numeric operations</p>"},{"location":"processors/lines","title":"lines","text":"<p>Split the received message into multiple messages separated by lines</p> Required <pre><code>processors:\n    - lines: {}\n</code></pre>"},{"location":"processors/noop","title":"noop","text":"<p>performs no operation against the message</p> Required <pre><code>processors:\n    - noop: {}\n</code></pre>"},{"location":"processors/python","title":"python","text":"<p>Any third party packages utilized in Python will have to be installed on the OS running fiddler.  </p> Required <p><code>yml     processors:         - python:             code: |                 new_string = \\\"python rules\\\"                 root = new_string</code></p> Full <p><code>yml     processors:         - python:             string: true             code: |                 import json                 new_string = f\\\"python: {root}\\\"                 root = new_string</code></p>"},{"location":"processors/python#fields","title":"Fields","text":""},{"location":"processors/python#string","title":"<code>string</code>","text":"<p>Indicate whether or not fiddler should convert the message to a string before invoking the python code. Type: <code>string</code> Required: <code>false</code> [default: <code>false</code>]</p>"},{"location":"processors/python#code","title":"<code>code</code>","text":"<p>The python code to execute Type: <code>string</code> Required: <code>true</code></p>"},{"location":"processors/python#usage","title":"Usage","text":"<p>The message is passed into the python code using a local variable <code>root</code>. The output taken from the executed code is also taken from the local variable <code>root</code>. By default <code>root</code> is bytes of the message, unless the argument <code>string: true</code> is proved, in which case <code>root</code> is converted to a string.</p>"},{"location":"processors/switch","title":"switch","text":"<p>Switch accepts an array of valid processors and is expected to be utlized with the <code>check</code> output.  Switch will attempt each provided processor; while failing to the next provided the error is returned is <code>ConditionalCheckfailed</code>.  Other encountered errors will be surfaced.</p> Required <pre><code>processors:\n  - switch: []\n</code></pre>"},{"location":"processors/switch#check","title":"<code>check</code>","text":"Required <pre><code>processors:\n  - switch:\n      - check:\n          condition: '\\\"Hello World\\\" &gt; `5`'\n          processors: \n            - noop: {}\"\n</code></pre>"},{"location":"processors/switch#fields","title":"Fields","text":""},{"location":"processors/switch#condition","title":"<code>condition</code>","text":"<p>Condition utilized for the execution of the processing step utilizing jmespath syntax for evaluation.  As such, this can only be utilized with JSON documents. Type: <code>string</code> Required: <code>true</code> </p>"},{"location":"processors/switch#output","title":"<code>output</code>","text":"<p>Valid fiddler output module Type: <code>object</code> Required: <code>true</code> </p>"},{"location":"processors/try","title":"try","text":"<p>Attempt to run a given processor and either continue processing or try alternative processors upon failure</p> RequiredFull <pre><code>processors:\n    - try: \n        processor: \n          noop: {}\n</code></pre> <pre><code>processors:\n    - try: \n        processor: \n          noop: {}\n        catch:\n          - noop: {}\n</code></pre>"},{"location":"processors/try#fields","title":"Fields","text":""},{"location":"processors/try#processor","title":"<code>processor</code>","text":"<p>The fiddler processor to use   Type: <code>object</code> Required: <code>true</code> </p>"},{"location":"processors/try#catch","title":"<code>catch</code>","text":"<p>An array of fiddler processors to run if the initial processor fails   Type: <code>array</code> Required: <code>false</code> </p>"},{"location":"scripting/About","title":"FiddlerScript","text":"<p>FiddlerScript is a minimal C-style scripting language with a Rust-based interpreter, designed for inline message manipulation within Fiddler pipelines.</p>"},{"location":"scripting/About#overview","title":"Overview","text":"<p>FiddlerScript provides a lightweight alternative to Python for simple data transformations. It supports:</p> <ul> <li>Data Types: integers, strings, booleans, bytes, arrays, and dictionaries</li> <li>Literal Syntax: array literals <code>[1, 2, 3]</code> and dictionary literals <code>{\"key\": value}</code></li> <li>Control Flow: <code>if-else</code> statements and <code>for</code> loops</li> <li>Functions: user-defined functions with recursion support</li> <li>Built-ins: <code>print()</code>, <code>len()</code>, <code>str()</code>, <code>int()</code>, <code>getenv()</code>, <code>parse_json()</code>, compression, base64, and more</li> <li>Comments: single-line comments with <code>//</code></li> </ul>"},{"location":"scripting/About#quick-example","title":"Quick Example","text":"<pre><code>// Process a JSON message\nlet data = parse_json(this);\nlet name = get(data, \"name\");\n\nif (name) {\n    print(\"Processing user:\", name);\n} else {\n    print(\"Unknown user\");\n}\n\n// Create a response\nlet response = {\"status\": \"ok\", \"processed\": true};\nthis = bytes(response);\n</code></pre> <pre><code>// Split message into multiple outputs\nlet lines = lines(this);\nlet results = [];\nfor (let i = 0; i &lt; len(lines); i = i + 1) {\n    let line = get(lines, i);\n    if (len(line) &gt; 0) {\n        results = push(results, bytes(line));\n    }\n}\nthis = results;\n</code></pre>"},{"location":"scripting/About#environment-variables","title":"Environment Variables","text":"<p>By default, FiddlerScript loads all OS environment variables as script variables, making them directly accessible:</p> <pre><code>// Access environment variables directly\nprint(HOME);\nprint(USER);\n\n// Or use getenv() for dynamic access\nlet key = \"PATH\";\nprint(getenv(key));\n</code></pre>"},{"location":"scripting/About#integration-with-fiddler","title":"Integration with Fiddler","text":"<p>FiddlerScript is designed to integrate seamlessly with Fiddler's message processing pipeline. Variables can be injected from Rust code before script execution, and results can be retrieved after execution.</p> <pre><code>use fiddler_script::{Interpreter, Value};\n\nlet mut interpreter = Interpreter::new();\n\n// Inject message data\ninterpreter.set_variable_bytes(\"message\", msg_bytes);\ninterpreter.set_variable_string(\"source\", \"input-queue\");\n\n// Run the script\ninterpreter.run(script_source)?;\n\n// Retrieve results\nif let Some(result) = interpreter.get_value(\"output\") {\n    // Process the result\n}\n</code></pre>"},{"location":"scripting/About#documentation","title":"Documentation","text":"<ul> <li>Syntax Guide - Language syntax and constructs</li> <li>Built-in Functions - Reference for all built-in functions</li> <li>Integration Guide - Using FiddlerScript from Rust</li> </ul>"},{"location":"scripting/builtins","title":"Built-in Functions","text":"<p>FiddlerScript provides a set of built-in functions for common operations.</p> <p>Note: Most built-in functions can be called using either function syntax <code>func(value, args)</code> or method syntax <code>value.func(args)</code>. Both are equivalent. Method syntax is useful for chaining operations.</p>"},{"location":"scripting/builtins#output","title":"Output","text":""},{"location":"scripting/builtins#printargs","title":"<code>print(args...)</code>","text":"<p>Print values to stdout.</p> <p>Arguments: Any number of values Returns: <code>null</code></p> <pre><code>print(\"Hello\");                    // Hello\nprint(\"Count:\", 42);               // Count: 42\nprint(\"a\", \"b\", \"c\");              // a b c\n</code></pre>"},{"location":"scripting/builtins#string-and-bytes-operations","title":"String and Bytes Operations","text":""},{"location":"scripting/builtins#lenvalue-valuelen","title":"<code>len(value)</code> / <code>value.len()</code>","text":"<p>Get the length of a string, bytes, array, or dictionary.</p> <p>Arguments: A string, bytes, array, or dictionary value Returns: Integer (length)</p> <pre><code>// Function syntax\nlet s = \"hello\";\nprint(len(s));          // 5\n\n// Method syntax\nprint(s.len());         // 5\nprint([1, 2, 3].len()); // 3\n</code></pre>"},{"location":"scripting/builtins#strvalue","title":"<code>str(value)</code>","text":"<p>Convert any value to a string.</p> <p>Arguments: Any value Returns: String representation</p> <pre><code>let n = 42;\nlet s = str(n);         // \"42\"\n\nlet b = true;\nlet bs = str(b);        // \"true\"\n</code></pre>"},{"location":"scripting/builtins#bytesvalue","title":"<code>bytes(value)</code>","text":"<p>Convert any value to bytes.</p> <p>Arguments: Any value Returns: Bytes representation</p> <pre><code>let b = bytes(\"hello\");     // String to bytes\nlet n = bytes(42);          // \"42\" as bytes\nlet f = bytes(true);        // \"true\" as bytes\n</code></pre>"},{"location":"scripting/builtins#bytes_to_stringbytes-bytesbytes_to_string","title":"<code>bytes_to_string(bytes)</code> / <code>bytes.bytes_to_string()</code>","text":"<p>Convert bytes to a UTF-8 string.</p> <p>Arguments: Bytes or string value Returns: String</p> <pre><code>// Function syntax\nlet text = bytes_to_string(data);\n\n// Method syntax\nlet text = data.bytes_to_string();\n</code></pre> <p>Invalid UTF-8 sequences are replaced with the Unicode replacement character.</p>"},{"location":"scripting/builtins#type-conversion","title":"Type Conversion","text":""},{"location":"scripting/builtins#intvalue","title":"<code>int(value)</code>","text":"<p>Convert a value to an integer.</p> <p>Arguments: String, integer, float, boolean, bytes, or null Returns: Integer</p> <pre><code>let n = int(\"42\");      // 42\nlet b = int(true);      // 1\nlet f = int(false);     // 0\nlet z = int(null);      // 0\nlet t = int(3.99);      // 3 (truncates float)\nlet neg = int(-2.7);    // -2 (truncates toward zero)\n</code></pre> <p>Strings must contain valid integer representations, or a runtime error occurs.</p>"},{"location":"scripting/builtins#floatvalue","title":"<code>float(value)</code>","text":"<p>Convert a value to a float.</p> <p>Arguments: String, integer, float, or boolean Returns: Float</p> <pre><code>let f = float(42);          // 42.0\nlet pi = float(\"3.14159\");  // 3.14159\nlet one = float(true);      // 1.0\nlet zero = float(false);    // 0.0\n</code></pre>"},{"location":"scripting/builtins#environment-variables","title":"Environment Variables","text":""},{"location":"scripting/builtins#getenvname","title":"<code>getenv(name)</code>","text":"<p>Get an environment variable by name.</p> <p>Arguments: String (variable name) Returns: String value or <code>null</code> if not found</p> <pre><code>let home = getenv(\"HOME\");\nif (home) {\n    print(\"Home directory:\", home);\n} else {\n    print(\"HOME not set\");\n}\n</code></pre> <p>Note: Environment variables are also loaded as script variables by default, so you can access them directly:</p> <pre><code>print(HOME);      // Same as getenv(\"HOME\")\nprint(PATH);      // Same as getenv(\"PATH\")\n</code></pre>"},{"location":"scripting/builtins#json-processing","title":"JSON Processing","text":""},{"location":"scripting/builtins#parse_jsondata","title":"<code>parse_json(data)</code>","text":"<p>Parse JSON from bytes or a string.</p> <p>Arguments: Bytes or string containing valid JSON Returns: Parsed value (dictionary, array, string, integer, boolean, or null)</p> <pre><code>// Parse a JSON string\nlet s = parse_json(\"\\\"hello\\\"\");      // \"hello\"\n\n// Parse a JSON number\nlet n = parse_json(\"42\");             // 42\n\n// Parse a JSON boolean\nlet b = parse_json(\"true\");           // true\n\n// Parse a JSON null\nlet z = parse_json(\"null\");           // null\n\n// Parse a JSON object (returns dictionary)\nlet obj = parse_json(\"{\\\"name\\\": \\\"Alice\\\", \\\"age\\\": 30}\");\nlet name = get(obj, \"name\");          // \"Alice\"\n\n// Parse a JSON array (returns array)\nlet arr = parse_json(\"[1, 2, 3]\");\nlet first = get(arr, 0);              // 1\n</code></pre> <p>Supported JSON types: - <code>null</code> -&gt; <code>null</code> - <code>true</code>/<code>false</code> -&gt; boolean - numbers -&gt; integer (floats are truncated) - strings -&gt; string - arrays -&gt; array - objects -&gt; dictionary</p>"},{"location":"scripting/builtins#array-operations","title":"Array Operations","text":""},{"location":"scripting/builtins#arrayargs","title":"<code>array(args...)</code>","text":"<p>Create a new array from arguments.</p> <p>Arguments: Any number of values Returns: Array containing all arguments</p> <pre><code>let arr = array(1, 2, 3);\nlet mixed = array(\"hello\", 42, true);\nlet empty = array();\n</code></pre>"},{"location":"scripting/builtins#pusharray-value","title":"<code>push(array, value)</code>","text":"<p>Add a value to the end of an array.</p> <p>Arguments: An array, a value to add Returns: A new array with the value appended</p> <pre><code>let arr = array(1, 2);\nlet arr2 = push(arr, 3);  // array(1, 2, 3)\n</code></pre>"},{"location":"scripting/builtins#getcollection-index","title":"<code>get(collection, index)</code>","text":"<p>Get a value from an array, dictionary, or string.</p> <p>Arguments: - For arrays: array, integer index - For strings: string, integer index - For dictionaries: dictionary, string key</p> <p>Returns: The value at the index/key, or <code>null</code> if not found</p> <pre><code>let arr = array(\"a\", \"b\", \"c\");\nlet first = get(arr, 0);       // \"a\"\n\nlet s = \"hello\";\nlet char = get(s, 1);          // \"e\"\n\nlet d = set(dict(), \"key\", \"value\");\nlet v = get(d, \"key\");         // \"value\"\n</code></pre>"},{"location":"scripting/builtins#setcollection-index-value","title":"<code>set(collection, index, value)</code>","text":"<p>Set a value in an array or dictionary.</p> <p>Arguments: - For arrays: array, integer index, value - For dictionaries: dictionary, string key, value</p> <p>Returns: A new array/dictionary with the value set</p> <pre><code>let arr = array(1, 2, 3);\nlet arr2 = set(arr, 1, 99);  // array(1, 99, 3)\n\nlet d = dict();\nlet d2 = set(d, \"name\", \"Alice\");\n</code></pre>"},{"location":"scripting/builtins#is_arrayvalue","title":"<code>is_array(value)</code>","text":"<p>Check if a value is an array.</p> <p>Arguments: Any value Returns: Boolean</p> <pre><code>let arr = array(1, 2);\nlet check = is_array(arr);  // true\nlet check2 = is_array(42);  // false\n</code></pre>"},{"location":"scripting/builtins#dictionary-operations","title":"Dictionary Operations","text":""},{"location":"scripting/builtins#dict","title":"<code>dict()</code>","text":"<p>Create an empty dictionary.</p> <p>Arguments: None Returns: Empty dictionary</p> <pre><code>let d = dict();\nlet d2 = set(d, \"key\", \"value\");\n</code></pre>"},{"location":"scripting/builtins#keysdictionary","title":"<code>keys(dictionary)</code>","text":"<p>Get all keys from a dictionary.</p> <p>Arguments: A dictionary Returns: Array of keys (strings) in insertion order</p> <pre><code>let d = set(set(dict(), \"a\", 1), \"b\", 2);\nlet k = keys(d);  // array(\"a\", \"b\") - order is preserved\n</code></pre> <p>Note: Keys are returned in the order they were inserted into the dictionary.</p>"},{"location":"scripting/builtins#is_dictvalue","title":"<code>is_dict(value)</code>","text":"<p>Check if a value is a dictionary.</p> <p>Arguments: Any value Returns: Boolean</p> <pre><code>let d = dict();\nlet check = is_dict(d);     // true\nlet check2 = is_dict(42);   // false\n</code></pre>"},{"location":"scripting/builtins#deletecollection-key","title":"<code>delete(collection, key)</code>","text":"<p>Remove an element from a dictionary or array.</p> <p>Arguments: - For dictionaries: dictionary, string key - For arrays: array, integer index</p> <p>Returns: A new collection with the element removed</p> <pre><code>let d = set(dict(), \"name\", \"Alice\");\nlet d2 = delete(d, \"name\");  // Empty dictionary\n\nlet arr = array(1, 2, 3);\nlet arr2 = delete(arr, 1);   // array(1, 3)\n</code></pre>"},{"location":"scripting/builtins#containscollection-item-collectioncontainsitem","title":"<code>contains(collection, item)</code> / <code>collection.contains(item)</code>","text":"<p>Check if a collection contains a value or key.</p> <p>Arguments: - For arrays: array, value to search for - For dictionaries: dictionary, string key to check</p> <p>Returns: Boolean (<code>true</code> if found, <code>false</code> otherwise)</p> <pre><code>// Array examples\nlet numbers = [1, 2, 3, 4, 5];\nnumbers.contains(3);           // true\nnumbers.contains(10);          // false\ncontains(numbers, 2);          // true (function syntax)\n\nlet fruits = [\"apple\", \"banana\"];\nfruits.contains(\"banana\");     // true\n\n// Dictionary examples\nlet user = {\"name\": \"Alice\", \"age\": 30};\nuser.contains(\"name\");         // true\nuser.contains(\"email\");        // false\ncontains(user, \"age\");         // true (function syntax)\n\n// In conditionals\nif (users.contains(\"admin\")) {\n    print(\"Admin exists\");\n}\n</code></pre>"},{"location":"scripting/builtins#string-operations","title":"String Operations","text":"<p>All string operations support both function and method syntax.</p>"},{"location":"scripting/builtins#capitalizestring-stringcapitalize","title":"<code>capitalize(string)</code> / <code>string.capitalize()</code>","text":"<p>Capitalize the first character of a string.</p> <p>Arguments: String Returns: String with first character uppercased</p> <pre><code>let s = \"hello\".capitalize();  // \"Hello\"\nlet s2 = capitalize(\"HELLO\");  // \"HELLO\"\n</code></pre>"},{"location":"scripting/builtins#lowercasestring-stringlowercase","title":"<code>lowercase(string)</code> / <code>string.lowercase()</code>","text":"<p>Convert a string to lowercase.</p> <p>Arguments: String Returns: Lowercase string</p> <pre><code>let s = \"Hello World\".lowercase();  // \"hello world\"\n</code></pre>"},{"location":"scripting/builtins#uppercasestring-stringuppercase","title":"<code>uppercase(string)</code> / <code>string.uppercase()</code>","text":"<p>Convert a string to uppercase.</p> <p>Arguments: String Returns: Uppercase string</p> <pre><code>let s = \"Hello World\".uppercase();  // \"HELLO WORLD\"\n</code></pre>"},{"location":"scripting/builtins#trimstring-stringtrim","title":"<code>trim(string)</code> / <code>string.trim()</code>","text":"<p>Remove leading and trailing whitespace from a string.</p> <p>Arguments: String Returns: Trimmed string</p> <pre><code>let s = \"  hello  \".trim();  // \"hello\"\n</code></pre>"},{"location":"scripting/builtins#trim_prefixstring-prefix","title":"<code>trim_prefix(string, prefix)</code>","text":"<p>Remove a prefix from a string if present.</p> <p>Arguments: String, prefix string Returns: String with prefix removed (or original if no match)</p> <pre><code>let s = trim_prefix(\"hello world\", \"hello \");  // \"world\"\nlet s2 = trim_prefix(\"hello\", \"bye\");          // \"hello\"\n</code></pre>"},{"location":"scripting/builtins#trim_suffixstring-suffix","title":"<code>trim_suffix(string, suffix)</code>","text":"<p>Remove a suffix from a string if present.</p> <p>Arguments: String, suffix string Returns: String with suffix removed (or original if no match)</p> <pre><code>let s = trim_suffix(\"hello.txt\", \".txt\");  // \"hello\"\nlet s2 = trim_suffix(\"hello\", \".txt\");     // \"hello\"\n</code></pre>"},{"location":"scripting/builtins#has_prefixstring-prefix","title":"<code>has_prefix(string, prefix)</code>","text":"<p>Check if a string starts with a prefix.</p> <p>Arguments: String, prefix string Returns: Boolean</p> <pre><code>let check = has_prefix(\"hello world\", \"hello\");  // true\nlet check2 = has_prefix(\"hello\", \"bye\");         // false\n</code></pre>"},{"location":"scripting/builtins#has_suffixstring-suffix","title":"<code>has_suffix(string, suffix)</code>","text":"<p>Check if a string ends with a suffix.</p> <p>Arguments: String, suffix string Returns: Boolean</p> <pre><code>let check = has_suffix(\"hello.txt\", \".txt\");  // true\nlet check2 = has_suffix(\"hello\", \".txt\");     // false\n</code></pre>"},{"location":"scripting/builtins#splitstring-delimiter-stringsplitdelimiter","title":"<code>split(string, delimiter)</code> / <code>string.split(delimiter)</code>","text":"<p>Split a string by a delimiter.</p> <p>Arguments: String, delimiter string Returns: Array of strings</p> <pre><code>let parts = \"a,b,c\".split(\",\");  // [\"a\", \"b\", \"c\"]\nlet words = \"hello world\".split(\" \");  // [\"hello\", \"world\"]\n</code></pre>"},{"location":"scripting/builtins#reversestring","title":"<code>reverse(string)</code>","text":"<p>Reverse a string.</p> <p>Arguments: String Returns: Reversed string</p> <pre><code>let s = reverse(\"hello\");  // \"olleh\"\n</code></pre>"},{"location":"scripting/builtins#linesvalue","title":"<code>lines(value)</code>","text":"<p>Split a string or bytes into lines.</p> <p>Arguments: String or bytes Returns: Array of strings (one per line)</p> <pre><code>let text = \"line1\\nline2\\nline3\";\nlet arr = lines(text);  // array(\"line1\", \"line2\", \"line3\")\n</code></pre> <p>Handles both Unix (<code>\\n</code>) and Windows (<code>\\r\\n</code>) line endings.</p>"},{"location":"scripting/builtins#compression","title":"Compression","text":""},{"location":"scripting/builtins#gzip_compressdata-level","title":"<code>gzip_compress(data, level?)</code>","text":"<p>Compress data using gzip.</p> <p>Arguments: - <code>data</code> - String or bytes to compress - <code>level</code> (optional) - Compression level 0-9 (default: 6). 0 = no compression, 9 = maximum compression.</p> <p>Returns: Compressed bytes</p> <pre><code>let compressed = gzip_compress(\"hello world\");\nlet max_compressed = gzip_compress(\"hello world\", 9);  // Maximum compression\nlet fast_compressed = gzip_compress(\"hello world\", 1); // Fast compression\n</code></pre>"},{"location":"scripting/builtins#gzip_decompressdata","title":"<code>gzip_decompress(data)</code>","text":"<p>Decompress gzip-compressed data.</p> <p>Arguments: Bytes Returns: Decompressed bytes</p> <pre><code>let original = gzip_decompress(compressed);\nlet text = bytes_to_string(original);\n</code></pre>"},{"location":"scripting/builtins#zlib_compressdata-level","title":"<code>zlib_compress(data, level?)</code>","text":"<p>Compress data using zlib.</p> <p>Arguments: - <code>data</code> - String or bytes to compress - <code>level</code> (optional) - Compression level 0-9 (default: 6). 0 = no compression, 9 = maximum compression.</p> <p>Returns: Compressed bytes</p> <pre><code>let compressed = zlib_compress(\"hello world\");\nlet max_compressed = zlib_compress(\"hello world\", 9);  // Maximum compression\n</code></pre>"},{"location":"scripting/builtins#zlib_decompressdata","title":"<code>zlib_decompress(data)</code>","text":"<p>Decompress zlib-compressed data.</p> <p>Arguments: Bytes Returns: Decompressed bytes</p> <pre><code>let original = zlib_decompress(compressed);\n</code></pre>"},{"location":"scripting/builtins#deflate_compressdata-level","title":"<code>deflate_compress(data, level?)</code>","text":"<p>Compress data using raw deflate.</p> <p>Arguments: - <code>data</code> - String or bytes to compress - <code>level</code> (optional) - Compression level 0-9 (default: 6). 0 = no compression, 9 = maximum compression.</p> <p>Returns: Compressed bytes</p> <pre><code>let compressed = deflate_compress(\"hello world\");\nlet max_compressed = deflate_compress(\"hello world\", 9);  // Maximum compression\n</code></pre>"},{"location":"scripting/builtins#deflate_decompressdata","title":"<code>deflate_decompress(data)</code>","text":"<p>Decompress raw deflate-compressed data.</p> <p>Arguments: Bytes Returns: Decompressed bytes</p> <pre><code>let original = deflate_decompress(compressed);\n</code></pre>"},{"location":"scripting/builtins#encoding","title":"Encoding","text":""},{"location":"scripting/builtins#base64_encodedata","title":"<code>base64_encode(data)</code>","text":"<p>Encode data as base64.</p> <p>Arguments: String or bytes Returns: Base64-encoded string</p> <pre><code>let encoded = base64_encode(\"hello\");  // \"aGVsbG8=\"\n</code></pre>"},{"location":"scripting/builtins#base64_decodedata","title":"<code>base64_decode(data)</code>","text":"<p>Decode base64-encoded data.</p> <p>Arguments: String or bytes Returns: Decoded bytes</p> <pre><code>let decoded = base64_decode(\"aGVsbG8=\");\nlet text = bytes_to_string(decoded);  // \"hello\"\n</code></pre>"},{"location":"scripting/builtins#math-functions","title":"Math Functions","text":""},{"location":"scripting/builtins#absvalue-valueabs","title":"<code>abs(value)</code> / <code>value.abs()</code>","text":"<p>Get the absolute value of a number.</p> <p>Arguments: Integer or float Returns: Same type as input (absolute value)</p> <pre><code>abs(-42);          // 42\nabs(-3.14);        // 3.14\n\nlet x = -10;\nx.abs();           // 10 (method syntax)\n\nlet y = -2.5;\ny.abs();           // 2.5 (method syntax)\n</code></pre>"},{"location":"scripting/builtins#ceilvalue-valueceil","title":"<code>ceil(value)</code> / <code>value.ceil()</code>","text":"<p>Ceiling function - rounds up to the nearest integer.</p> <p>Arguments: Integer or float Returns: Integer</p> <pre><code>ceil(42);          // 42 (integers unchanged)\nceil(3.14);        // 4\nceil(-3.14);       // -3\n\nlet x = 2.5;\nx.ceil();          // 3 (method syntax)\n</code></pre>"},{"location":"scripting/builtins#floorvalue-valuefloor","title":"<code>floor(value)</code> / <code>value.floor()</code>","text":"<p>Floor function - rounds down to the nearest integer.</p> <p>Arguments: Integer or float Returns: Integer</p> <pre><code>floor(42);         // 42 (integers unchanged)\nfloor(3.99);       // 3\nfloor(-3.14);      // -4\n\nlet x = 2.5;\nx.floor();         // 2 (method syntax)\n</code></pre>"},{"location":"scripting/builtins#roundvalue-valueround","title":"<code>round(value)</code> / <code>value.round()</code>","text":"<p>Round function - rounds to the nearest integer.</p> <p>Arguments: Integer or float Returns: Integer</p> <pre><code>round(42);         // 42 (integers unchanged)\nround(3.4);        // 3\nround(3.5);        // 4\nround(-3.5);       // -4\n\nlet x = 2.5;\nx.round();         // 3 (method syntax)\n</code></pre>"},{"location":"scripting/builtins#time-functions","title":"Time Functions","text":""},{"location":"scripting/builtins#timestamp","title":"<code>timestamp()</code>","text":"<p>Get the current Unix timestamp in seconds.</p> <p>Arguments: None Returns: Integer (seconds since Unix epoch)</p> <pre><code>let now = timestamp();\nprint(\"Current time:\", now);  // e.g., 1706284800\n</code></pre>"},{"location":"scripting/builtins#epoch","title":"<code>epoch()</code>","text":"<p>Alias for <code>timestamp()</code>. Get the current Unix timestamp in seconds.</p> <p>Arguments: None Returns: Integer (seconds since Unix epoch)</p> <pre><code>let now = epoch();\n</code></pre>"},{"location":"scripting/builtins#timestamp_millis","title":"<code>timestamp_millis()</code>","text":"<p>Get the current Unix timestamp in milliseconds.</p> <p>Arguments: None Returns: Integer (milliseconds since Unix epoch)</p> <pre><code>let now_ms = timestamp_millis();\nprint(\"Milliseconds:\", now_ms);  // e.g., 1706284800123\n\n// Measure elapsed time\nlet start = timestamp_millis();\n// ... do work ...\nlet elapsed = timestamp_millis() - start;\nprint(\"Took\", elapsed, \"ms\");\n</code></pre>"},{"location":"scripting/builtins#timestamp_micros","title":"<code>timestamp_micros()</code>","text":"<p>Get the current Unix timestamp in microseconds.</p> <p>Arguments: None Returns: Integer (microseconds since Unix epoch)</p> <pre><code>let now_us = timestamp_micros();\nprint(\"Microseconds:\", now_us);  // e.g., 1706284800123456\n</code></pre>"},{"location":"scripting/builtins#timestamp_iso8601","title":"<code>timestamp_iso8601()</code>","text":"<p>Get the current time as an ISO 8601 formatted string (RFC 3339).</p> <p>Arguments: None Returns: String in ISO 8601 format</p> <pre><code>let now = timestamp_iso8601();\nprint(\"Current time:\", now);  // e.g., \"2024-01-26T12:34:56.789+00:00\"\n\n// Use in logging\nfn log(message) {\n    let ts = timestamp_iso8601();\n    print(\"[\" + ts + \"]\", message);\n}\n\nlog(\"Application started\");\n</code></pre>"},{"location":"scripting/builtins#summary-table","title":"Summary Table","text":""},{"location":"scripting/builtins#core-functions","title":"Core Functions","text":"Function Arguments Returns Description <code>print(args...)</code> Any values <code>null</code> Print to stdout <code>len(value)</code> String, bytes, array, or dict Integer Get length <code>str(value)</code> Any String Convert to string <code>int(value)</code> Any Integer Convert to integer (truncates floats) <code>float(value)</code> Numeric, string, or boolean Float Convert to float <code>bytes(value)</code> Any Bytes Convert to bytes <code>bytes_to_string(value)</code> Bytes or string String Convert bytes to string <code>getenv(name)</code> String String or null Get environment variable <code>parse_json(data)</code> Bytes or string Dict, array, etc. Parse JSON data"},{"location":"scripting/builtins#collections","title":"Collections","text":"Function Arguments Returns Description <code>array(args...)</code> Any values Array Create array <code>push(arr, val)</code> Array, any Array Append to array <code>get(coll, key)</code> Collection, key Any Get by index/key <code>set(coll, key, val)</code> Collection, key, any Collection Set by index/key <code>delete(coll, key)</code> Collection, key Collection Remove by index/key <code>contains(coll, item)</code> Collection, item Boolean Check if item/key exists <code>dict()</code> None Dictionary Create empty dict <code>keys(dict)</code> Dictionary Array Get keys (insertion order) <code>is_array(val)</code> Any Boolean Check if array <code>is_dict(val)</code> Any Boolean Check if dictionary"},{"location":"scripting/builtins#string-operations_1","title":"String Operations","text":"Function Arguments Returns Description <code>capitalize(str)</code> String String Capitalize first character <code>lowercase(str)</code> String String Convert to lowercase <code>uppercase(str)</code> String String Convert to uppercase <code>trim(str)</code> String String Remove leading/trailing whitespace <code>trim_prefix(str, prefix)</code> String, String String Remove prefix if present <code>trim_suffix(str, suffix)</code> String, String String Remove suffix if present <code>has_prefix(str, prefix)</code> String, String Boolean Check if starts with prefix <code>has_suffix(str, suffix)</code> String, String Boolean Check if ends with suffix <code>split(str, delim)</code> String, String Array Split by delimiter <code>reverse(str)</code> String String Reverse string <code>lines(value)</code> String or bytes Array Split into lines"},{"location":"scripting/builtins#compression_1","title":"Compression","text":"Function Arguments Returns Description <code>gzip_compress(data, level?)</code> Data, optional level (0-9) Bytes Gzip compress <code>gzip_decompress(data)</code> Bytes Bytes Gzip decompress <code>zlib_compress(data, level?)</code> Data, optional level (0-9) Bytes Zlib compress <code>zlib_decompress(data)</code> Bytes Bytes Zlib decompress <code>deflate_compress(data, level?)</code> Data, optional level (0-9) Bytes Deflate compress <code>deflate_decompress(data)</code> Bytes Bytes Deflate decompress"},{"location":"scripting/builtins#encoding_1","title":"Encoding","text":"Function Arguments Returns Description <code>base64_encode(data)</code> String or bytes String Encode as base64 <code>base64_decode(data)</code> String or bytes Bytes Decode from base64"},{"location":"scripting/builtins#math","title":"Math","text":"Function Arguments Returns Description <code>abs(val)</code> Integer or float Same type as input Absolute value <code>ceil(val)</code> Integer or float Integer Ceiling (rounds up) <code>floor(val)</code> Integer or float Integer Floor (rounds down) <code>round(val)</code> Integer or float Integer Round to nearest"},{"location":"scripting/builtins#time","title":"Time","text":"Function Arguments Returns Description <code>timestamp()</code> None Integer Unix timestamp in seconds <code>epoch()</code> None Integer Alias for timestamp() <code>timestamp_millis()</code> None Integer Unix timestamp in milliseconds <code>timestamp_micros()</code> None Integer Unix timestamp in microseconds <code>timestamp_iso8601()</code> None String Current time in ISO 8601 format"},{"location":"scripting/integration","title":"Integration Guide","text":"<p>This guide covers how to use FiddlerScript from Rust code.</p>"},{"location":"scripting/integration#creating-an-interpreter","title":"Creating an Interpreter","text":""},{"location":"scripting/integration#standard-interpreter","title":"Standard Interpreter","text":"<p>The standard interpreter loads all OS environment variables as script variables:</p> <pre><code>use fiddler_script::Interpreter;\n\nlet mut interpreter = Interpreter::new();\n</code></pre>"},{"location":"scripting/integration#interpreter-without-environment-variables","title":"Interpreter Without Environment Variables","text":"<p>For a clean environment without OS variables:</p> <pre><code>use fiddler_script::Interpreter;\n\nlet mut interpreter = Interpreter::new_without_env();\n</code></pre>"},{"location":"scripting/integration#interpreter-with-custom-built-ins","title":"Interpreter with Custom Built-ins","text":"<p>Add custom built-in functions:</p> <pre><code>use fiddler_script::{Interpreter, Value, RuntimeError};\nuse std::collections::HashMap;\n\nlet mut builtins: HashMap&lt;String, fn(Vec&lt;Value&gt;) -&gt; Result&lt;Value, RuntimeError&gt;&gt; = HashMap::new();\n\nbuiltins.insert(\"double\".to_string(), |args| {\n    if let Some(Value::Integer(n)) = args.first() {\n        Ok(Value::Integer(n * 2))\n    } else {\n        Err(RuntimeError::invalid_argument(\"Expected integer\"))\n    }\n});\n\nlet mut interpreter = Interpreter::with_builtins(builtins);\n</code></pre>"},{"location":"scripting/integration#running-scripts","title":"Running Scripts","text":""},{"location":"scripting/integration#basic-execution","title":"Basic Execution","text":"<pre><code>use fiddler_script::Interpreter;\n\nlet mut interpreter = Interpreter::new();\nlet result = interpreter.run(\"let x = 10 + 5; x;\");\n\nmatch result {\n    Ok(value) =&gt; println!(\"Result: {}\", value),\n    Err(e) =&gt; eprintln!(\"Error: {}\", e),\n}\n</code></pre>"},{"location":"scripting/integration#error-handling","title":"Error Handling","text":"<p>FiddlerScript provides three error types wrapped in <code>FiddlerError</code>:</p> <pre><code>use fiddler_script::{Interpreter, FiddlerError, LexError, ParseError, RuntimeError};\n\nlet mut interpreter = Interpreter::new();\nlet result = interpreter.run(source);\n\nmatch result {\n    Ok(value) =&gt; println!(\"Success: {}\", value),\n    Err(FiddlerError::Lex(e)) =&gt; eprintln!(\"Lexer error: {}\", e),\n    Err(FiddlerError::Parse(e)) =&gt; eprintln!(\"Parser error: {}\", e),\n    Err(FiddlerError::Runtime(e)) =&gt; eprintln!(\"Runtime error: {}\", e),\n}\n</code></pre>"},{"location":"scripting/integration#injecting-variables","title":"Injecting Variables","text":""},{"location":"scripting/integration#setting-variables-before-execution","title":"Setting Variables Before Execution","text":"<pre><code>use fiddler_script::{Interpreter, Value};\n\nlet mut interpreter = Interpreter::new();\n\n// Set different types\ninterpreter.set_variable_int(\"count\", 42);\ninterpreter.set_variable_string(\"name\", \"Alice\");\ninterpreter.set_variable_bytes(\"data\", b\"raw bytes\".to_vec());\ninterpreter.set_variable_value(\"flag\", Value::Boolean(true));\n\ninterpreter.run(r#\"\n    print(\"Count:\", count);\n    print(\"Name:\", name);\n    print(\"Data length:\", len(data));\n    print(\"Flag:\", flag);\n\"#).unwrap();\n</code></pre>"},{"location":"scripting/integration#variable-setters","title":"Variable Setters","text":"Method Description <code>set_variable_value(name, Value)</code> Set any Value type <code>set_variable_int(name, i64)</code> Set an integer <code>set_variable_string(name, impl Into&lt;String&gt;)</code> Set a string <code>set_variable_bytes(name, Vec&lt;u8&gt;)</code> Set bytes <code>set_variable_dict(name, IndexMap&lt;String, Value&gt;)</code> Set a dictionary"},{"location":"scripting/integration#retrieving-variables","title":"Retrieving Variables","text":""},{"location":"scripting/integration#getting-values-after-execution","title":"Getting Values After Execution","text":"<pre><code>use fiddler_script::{Interpreter, Value};\n\nlet mut interpreter = Interpreter::new();\ninterpreter.run(\"let result = 10 * 5;\").unwrap();\n\n// Get as Value type\nif let Some(value) = interpreter.get_value(\"result\") {\n    match value {\n        Value::Integer(n) =&gt; println!(\"Integer: {}\", n),\n        Value::String(s) =&gt; println!(\"String: {}\", s),\n        Value::Boolean(b) =&gt; println!(\"Boolean: {}\", b),\n        Value::Bytes(bytes) =&gt; println!(\"Bytes: {} bytes\", bytes.len()),\n        Value::Array(arr) =&gt; println!(\"Array: {} elements\", arr.len()),\n        Value::Dictionary(dict) =&gt; println!(\"Dictionary: {} keys\", dict.len()),\n        Value::Null =&gt; println!(\"Null\"),\n    }\n}\n\n// Get as bytes (converts any value to bytes)\nif let Some(bytes) = interpreter.get_bytes(\"result\") {\n    println!(\"As bytes: {:?}\", bytes);\n}\n\n// Check if variable exists\nif interpreter.has_variable(\"result\") {\n    println!(\"Variable exists\");\n}\n</code></pre>"},{"location":"scripting/integration#variable-getters","title":"Variable Getters","text":"Method Returns Description <code>get_value(name)</code> <code>Option&lt;Value&gt;</code> Get variable as Value type <code>get_bytes(name)</code> <code>Option&lt;Vec&lt;u8&gt;&gt;</code> Get variable as bytes <code>has_variable(name)</code> <code>bool</code> Check if variable exists"},{"location":"scripting/integration#the-value-type","title":"The Value Type","text":"<p>The <code>Value</code> enum represents all FiddlerScript values:</p> <pre><code>use indexmap::IndexMap;\n\npub enum Value {\n    Integer(i64),\n    String(String),\n    Boolean(bool),\n    Bytes(Vec&lt;u8&gt;),\n    Array(Vec&lt;Value&gt;),\n    Dictionary(IndexMap&lt;String, Value&gt;),\n    Null,\n}\n</code></pre> <p>Dictionaries use <code>IndexMap</code> to preserve insertion order when iterating over keys.</p>"},{"location":"scripting/integration#converting-values-to-bytes","title":"Converting Values to Bytes","text":"<p>All values can be converted to bytes:</p> <pre><code>use fiddler_script::Value;\n\nlet v = Value::Integer(42);\nlet bytes = v.to_bytes();  // \"42\" as bytes\n\nlet v = Value::String(\"hello\".to_string());\nlet bytes = v.to_bytes();  // \"hello\" as bytes\n\nlet v = Value::Boolean(true);\nlet bytes = v.to_bytes();  // \"true\" as bytes\n</code></pre>"},{"location":"scripting/integration#complete-example","title":"Complete Example","text":"<pre><code>use fiddler_script::{Interpreter, Value};\n\nfn process_message(message: &amp;[u8]) -&gt; Result&lt;Vec&lt;u8&gt;, Box&lt;dyn std::error::Error&gt;&gt; {\n    let mut interpreter = Interpreter::new();\n\n    // Inject the message\n    interpreter.set_variable_bytes(\"input\", message.to_vec());\n    interpreter.set_variable_int(\"timestamp\", chrono::Utc::now().timestamp());\n\n    // Run the processing script\n    let script = r#\"\n        let text = bytes_to_string(input);\n        let processed = text + \" [processed at \" + str(timestamp) + \"]\";\n        let output = bytes(processed);\n    \"#;\n\n    interpreter.run(script)?;\n\n    // Get the result\n    match interpreter.get_bytes(\"output\") {\n        Some(bytes) =&gt; Ok(bytes),\n        None =&gt; Err(\"No output produced\".into()),\n    }\n}\n</code></pre>"},{"location":"scripting/integration#reusing-the-interpreter","title":"Reusing the Interpreter","text":"<p>The interpreter maintains state between <code>run()</code> calls, so you can define functions once and use them later:</p> <pre><code>use fiddler_script::Interpreter;\n\nlet mut interpreter = Interpreter::new();\n\n// Define helper functions\ninterpreter.run(r#\"\n    fn double(x) { return x * 2; }\n    fn triple(x) { return x * 3; }\n\"#).unwrap();\n\n// Use them in subsequent calls\nlet result = interpreter.run(\"double(21);\").unwrap();\nprintln!(\"{}\", result);  // 42\n\nlet result = interpreter.run(\"triple(14);\").unwrap();\nprintln!(\"{}\", result);  // 42\n</code></pre>"},{"location":"scripting/integration#thread-safety","title":"Thread Safety","text":"<p>The <code>Interpreter</code> is not thread-safe. Each thread should have its own interpreter instance:</p> <pre><code>use fiddler_script::Interpreter;\nuse std::thread;\n\nlet handles: Vec&lt;_&gt; = (0..4).map(|i| {\n    thread::spawn(move || {\n        let mut interpreter = Interpreter::new();\n        interpreter.set_variable_int(\"thread_id\", i);\n        interpreter.run(\"print(\\\"Thread\\\", thread_id);\").unwrap();\n    })\n}).collect();\n\nfor handle in handles {\n    handle.join().unwrap();\n}\n</code></pre>"},{"location":"scripting/syntax","title":"FiddlerScript Syntax","text":"<p>This document describes the complete syntax of the FiddlerScript language.</p>"},{"location":"scripting/syntax#variables","title":"Variables","text":"<p>Variables are declared using the <code>let</code> keyword and can hold integers, strings, booleans, or bytes.</p> <pre><code>let x = 10;              // Integer\nlet name = \"hello\";      // String\nlet flag = true;         // Boolean\nlet empty = false;       // Boolean\n</code></pre> <p>Variables can be reassigned after declaration:</p> <pre><code>let x = 10;\nx = 20;      // Reassignment\nx = x + 5;   // Using current value\n</code></pre>"},{"location":"scripting/syntax#data-types","title":"Data Types","text":""},{"location":"scripting/syntax#integers","title":"Integers","text":"<p>64-bit signed integers supporting standard arithmetic operations.</p> <pre><code>let a = 42;\nlet b = -10;\nlet c = 0;\n</code></pre>"},{"location":"scripting/syntax#floats","title":"Floats","text":"<p>64-bit floating-point numbers (IEEE 754 double precision).</p> <pre><code>let pi = 3.14159;\nlet half = 0.5;\nlet negative = -2.5;\nlet whole = 2.0;      // Float, not integer (has decimal point)\n</code></pre> <p>Arithmetic with floats:</p> <pre><code>let a = 3.5 + 2.0;    // 5.5\nlet b = 10.0 / 4.0;   // 2.5\nlet c = 10 + 3.5;     // 13.5 (mixed: integer promoted to float)\nlet d = 2.5 * 4;      // 10.0 (mixed: result is float)\n</code></pre> <p>Special values:</p> <pre><code>let inf = 1.0 / 0.0;     // Infinity\nlet neg_inf = -1.0 / 0.0; // -Infinity\nlet nan = 0.0 / 0.0;      // NaN (Not a Number)\n</code></pre>"},{"location":"scripting/syntax#strings","title":"Strings","text":"<p>UTF-8 strings with escape sequence support.</p> <pre><code>let greeting = \"Hello, World!\";\nlet multiline = \"Line 1\\nLine 2\";\nlet quoted = \"She said \\\"Hi\\\"\";\nlet path = \"C:\\\\Users\\\\name\";\n</code></pre> <p>Supported escape sequences: - <code>\\n</code> - newline - <code>\\t</code> - tab - <code>\\r</code> - carriage return - <code>\\\\</code> - backslash - <code>\\\"</code> - double quote</p>"},{"location":"scripting/syntax#booleans","title":"Booleans","text":"<p>Boolean values for logical operations.</p> <pre><code>let yes = true;\nlet no = false;\n</code></pre>"},{"location":"scripting/syntax#bytes","title":"Bytes","text":"<p>Raw binary data, typically injected from Rust code.</p> <pre><code>// Bytes are usually injected from external code\n// Convert to string for processing\nlet text = bytes_to_string(data);\n</code></pre>"},{"location":"scripting/syntax#arrays","title":"Arrays","text":"<p>Ordered collections of values. Arrays can be created using literal syntax or the <code>array()</code> function.</p> <pre><code>// Array literal syntax\nlet arr = [1, 2, 3];\nlet mixed = [\"hello\", 42, true];\nlet empty = [];\n\n// Or using array() function\nlet arr2 = array(1, 2, 3);\n\n// Array operations (function or method syntax)\nlet first = arr.get(0);             // Get element at index\nlet arr3 = arr.push(4);             // Add element (returns new array)\nlet size = arr.len();               // Get length\n\n// Equivalent function syntax\nlet first = get(arr, 0);\nlet arr3 = push(arr, 4);\nlet size = len(arr);\n</code></pre>"},{"location":"scripting/syntax#dictionaries","title":"Dictionaries","text":"<p>Key-value collections with string keys. Dictionaries preserve insertion order when iterating.</p> <pre><code>// Dictionary literal syntax\nlet person = {\"name\": \"Alice\", \"age\": 30};\nlet nested = {\"user\": {\"id\": 1, \"active\": true}};\nlet empty = {};\n\n// Or using dict() and set() functions\nlet d = dict();\nlet d2 = d.set(\"name\", \"Alice\");\n\n// Dictionary operations (method syntax)\nlet name = person.get(\"name\");      // Get value by key\nlet k = person.keys();              // Get array of keys (in insertion order)\n\n// Equivalent function syntax\nlet name = get(person, \"name\");\nlet k = keys(person);\n</code></pre> <p>Note: Dictionary keys are always strings. When iterating with <code>keys()</code>, the order matches the order in which keys were inserted.</p>"},{"location":"scripting/syntax#null","title":"Null","text":"<p>Represents the absence of a value.</p> <pre><code>let result = getenv(\"NONEXISTENT\");  // Returns null\n</code></pre>"},{"location":"scripting/syntax#operators","title":"Operators","text":""},{"location":"scripting/syntax#arithmetic-operators","title":"Arithmetic Operators","text":"Operator Description Example <code>+</code> Addition (integers) or concatenation (strings) <code>5 + 3</code> <code>-</code> Subtraction <code>5 - 3</code> <code>*</code> Multiplication <code>5 * 3</code> <code>/</code> Integer division <code>5 / 3</code> <code>%</code> Modulo (remainder) <code>5 % 3</code> <pre><code>let sum = 10 + 5;        // 15\nlet diff = 10 - 5;       // 5\nlet product = 10 * 5;    // 50\nlet quotient = 10 / 3;   // 3 (integer division)\nlet remainder = 10 % 3;  // 1\n</code></pre>"},{"location":"scripting/syntax#string-concatenation","title":"String Concatenation","text":"<p>The <code>+</code> operator concatenates strings:</p> <pre><code>let greeting = \"Hello\" + \" \" + \"World\";  // \"Hello World\"\n</code></pre>"},{"location":"scripting/syntax#comparison-operators","title":"Comparison Operators","text":"Operator Description Example <code>==</code> Equal to <code>x == 5</code> <code>!=</code> Not equal to <code>x != 5</code> <code>&lt;</code> Less than <code>x &lt; 5</code> <code>&lt;=</code> Less than or equal <code>x &lt;= 5</code> <code>&gt;</code> Greater than <code>x &gt; 5</code> <code>&gt;=</code> Greater than or equal <code>x &gt;= 5</code> <pre><code>let a = 5 &gt; 3;   // true\nlet b = 5 == 5;  // true\nlet c = 5 != 3;  // true\nlet d = 5 &lt;= 5;  // true\n</code></pre>"},{"location":"scripting/syntax#logical-operators","title":"Logical Operators","text":"Operator Description Example <code>&amp;&amp;</code> Logical AND <code>a &amp;&amp; b</code> <code>\\|\\|</code> Logical OR <code>a \\|\\| b</code> <code>!</code> Logical NOT <code>!a</code> <pre><code>let a = true &amp;&amp; false;   // false\nlet b = true || false;   // true\nlet c = !true;           // false\n</code></pre>"},{"location":"scripting/syntax#unary-operators","title":"Unary Operators","text":"Operator Description Example <code>-</code> Negation <code>-5</code> <code>!</code> Logical NOT <code>!true</code> <pre><code>let neg = -42;      // -42\nlet inv = !true;    // false\n</code></pre>"},{"location":"scripting/syntax#control-flow","title":"Control Flow","text":""},{"location":"scripting/syntax#if-else-statements","title":"If-Else Statements","text":"<pre><code>if (condition) {\n    // executed if condition is true\n}\n</code></pre> <pre><code>if (x &gt; 0) {\n    print(\"positive\");\n} else {\n    print(\"non-positive\");\n}\n</code></pre> <pre><code>if (x &gt; 0) {\n    print(\"positive\");\n} else if (x &lt; 0) {\n    print(\"negative\");\n} else {\n    print(\"zero\");\n}\n</code></pre>"},{"location":"scripting/syntax#truthiness","title":"Truthiness","text":"<p>The following values are considered \"falsy\": - <code>false</code> - <code>0</code> (integer zero) - <code>\"\"</code> (empty string) - Empty bytes - <code>null</code></p> <p>All other values are considered \"truthy\".</p>"},{"location":"scripting/syntax#for-loops","title":"For Loops","text":"<p>C-style for loops with initialization, condition, and update expressions:</p> <pre><code>for (let i = 0; i &lt; 10; i = i + 1) {\n    print(i);\n}\n</code></pre> <p>All parts are optional:</p> <pre><code>// No initialization\nlet i = 0;\nfor (; i &lt; 5; i = i + 1) {\n    print(i);\n}\n\n// Infinite loop (use with caution)\nfor (;;) {\n    // ...\n}\n</code></pre>"},{"location":"scripting/syntax#functions","title":"Functions","text":""},{"location":"scripting/syntax#function-definition","title":"Function Definition","text":"<p>Functions are defined with the <code>fn</code> keyword:</p> <pre><code>fn add(a, b) {\n    return a + b;\n}\n</code></pre>"},{"location":"scripting/syntax#function-calls","title":"Function Calls","text":"<pre><code>let result = add(5, 3);  // 8\nprint(result);\n</code></pre>"},{"location":"scripting/syntax#method-call-syntax","title":"Method Call Syntax","text":"<p>FiddlerScript supports method call syntax for built-in functions. Instead of passing a value as the first argument, you can call the function as a method on that value:</p> <pre><code>// Function syntax (traditional)\nlet length = len(\"hello\");\nlet lower = lowercase(\"HELLO\");\n\n// Method syntax (equivalent)\nlet length = \"hello\".len();\nlet lower = \"HELLO\".lowercase();\n</code></pre> <p>Both syntaxes are equivalent and can be used interchangeably. Method syntax is particularly useful for chaining operations:</p> <pre><code>// Method chaining\nlet result = \"  HELLO WORLD  \"\n    .trim()\n    .lowercase()\n    .split(\" \");\n// result is [\"hello\", \"world\"]\n\n// Array method chaining\nlet arr = [1, 2, 3]\n    .push(4)\n    .push(5);\n// arr is [1, 2, 3, 4, 5]\n\nlet length = arr.len();  // 5\n</code></pre> <p>Available methods:</p> Type Methods String <code>len()</code>, <code>lowercase()</code>, <code>uppercase()</code>, <code>capitalize()</code>, <code>trim()</code>, <code>trim_prefix(s)</code>, <code>trim_suffix(s)</code>, <code>has_prefix(s)</code>, <code>has_suffix(s)</code>, <code>split(delim)</code>, <code>reverse()</code>, <code>lines()</code> Integer <code>abs()</code>, <code>ceil()</code>, <code>floor()</code>, <code>round()</code> Array <code>len()</code>, <code>get(index)</code>, <code>set(index, value)</code>, <code>push(value)</code>, <code>delete(index)</code>, <code>contains(value)</code>, <code>reverse()</code> Dictionary <code>len()</code>, <code>get(key)</code>, <code>set(key, value)</code>, <code>delete(key)</code>, <code>contains(key)</code>, <code>keys()</code> Bytes <code>len()</code>, <code>bytes_to_string()</code>"},{"location":"scripting/syntax#return-statement","title":"Return Statement","text":"<p>Functions return values using the <code>return</code> statement:</p> <pre><code>fn max(a, b) {\n    if (a &gt; b) {\n        return a;\n    }\n    return b;\n}\n</code></pre> <p>Functions without an explicit return statement return <code>null</code>.</p>"},{"location":"scripting/syntax#recursion","title":"Recursion","text":"<p>Functions can call themselves recursively:</p> <pre><code>fn factorial(n) {\n    if (n &lt;= 1) {\n        return 1;\n    }\n    return n * factorial(n - 1);\n}\n\nprint(factorial(5));  // 120\n</code></pre> <pre><code>fn fibonacci(n) {\n    if (n &lt;= 1) {\n        return n;\n    }\n    return fibonacci(n - 1) + fibonacci(n - 2);\n}\n</code></pre> <p>Note: FiddlerScript has a maximum recursion depth of 64 nested function calls to prevent stack overflow. Exceeding this limit will result in a runtime error.</p>"},{"location":"scripting/syntax#blocks-and-scope","title":"Blocks and Scope","text":"<p>Code blocks create new scopes. Variables declared inside a block are not visible outside:</p> <pre><code>let x = 10;\nif (true) {\n    let x = 20;  // This shadows the outer x\n    print(x);    // Prints 20\n}\nprint(x);        // Prints 10\n</code></pre>"},{"location":"scripting/syntax#comments","title":"Comments","text":"<p>Single-line comments start with <code>//</code>:</p> <pre><code>// This is a comment\nlet x = 10;  // This is also a comment\n\n// Multi-line comments are written\n// using multiple single-line comments\n</code></pre>"},{"location":"scripting/syntax#operator-precedence","title":"Operator Precedence","text":"<p>From highest to lowest precedence:</p> <ol> <li>Unary operators: <code>!</code>, <code>-</code></li> <li>Multiplicative: <code>*</code>, <code>/</code>, <code>%</code></li> <li>Additive: <code>+</code>, <code>-</code></li> <li>Comparison: <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></li> <li>Equality: <code>==</code>, <code>!=</code></li> <li>Logical AND: <code>&amp;&amp;</code></li> <li>Logical OR: <code>||</code></li> <li>Assignment: <code>=</code></li> </ol> <p>Use parentheses to override precedence:</p> <pre><code>let a = 2 + 3 * 4;       // 14 (multiplication first)\nlet b = (2 + 3) * 4;     // 20 (addition first due to parentheses)\n</code></pre>"}]}